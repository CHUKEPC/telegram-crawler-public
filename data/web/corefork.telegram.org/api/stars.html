<!DOCTYPE html>
<html class="">
  <head>
    <meta charset="utf-8">
    <title>Telegram Stars</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="description" content="Telegram Stars are virtual items that allow users to purchase digital goods and services from bots and mini apps inside the Telegram ecosystem, send gifts to content creators on the Telegram platform, and more.">
    <meta property="og:title" content="Telegram Stars">
    <meta property="og:image" content="">
    <meta property="og:description" content="Telegram Stars are virtual items that allow users to purchase digital goods and services from bots and mini apps inside the Telegram ecosystem, send gifts to content creators on the Telegram platform, and more.">
    <link rel="icon" type="image/svg+xml" href="/img/website_icon.svg?4">
<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="alternate icon" href="/img/favicon.ico" type="image/x-icon" />
    <link href="/css/bootstrap.min.css?3" rel="stylesheet">
    
    <link href="/css/telegram.css?242" rel="stylesheet" media="screen">
    <style>
    </style>
  </head>
  <body class="preload">
    <div class="dev_page_wrap">
      <div class="dev_page_head navbar navbar-static-top navbar-tg">
        <div class="navbar-inner">
          <div class="container clearfix">
            <ul class="nav navbar-nav navbar-right hidden-xs"><li class="navbar-twitter"><a href="https://twitter.com/telegram" target="_blank" data-track="Follow/Twitter" onclick="trackDlClick(this, event)"><i class="icon icon-twitter"></i><span> Twitter</span></a></li></ul>
            <ul class="nav navbar-nav">
              <li><a href="//telegram.org/">Home</a></li>
<li class="hidden-xs"><a href="//telegram.org/faq">FAQ</a></li>
<li class="hidden-xs"><a href="//telegram.org/apps">Apps</a></li>
<li class="active"><a href="/api">API</a></li>
<li class=""><a href="/mtproto">Protocol</a></li>
<li class=""><a href="/schema">Schema</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container clearfix">
        <div class="dev_page">
          <div id="dev_page_content_wrap" class=" ">
  <div class="dev_page_bread_crumbs"><ul class="breadcrumb clearfix"><li><a  href="/api" >API</a></li><i class="icon icon-breadcrumb-divider"></i><li><a  href="/api/stars" >Telegram Stars</a></li></ul></div>
  <h1 id="dev_page_title">Telegram Stars</h1>
  
  <div id="dev_page_content"><!-- scroll_nav -->

<p>Telegram Stars are virtual items that allow users to purchase digital goods and services from bots and mini apps inside the Telegram ecosystem, send gifts to content creators on the Telegram platform, and more.  </p>
<p>This page describes the methods used to buy, use and withdraw <a href="https://telegram.org/blog/mini-app-bar-paid-media-and-more#rewards-for-content-creators-and-developers">Telegram Stars</a>, as well as view detailed revenue stats and make purchases using Telegram Stars.  </p>
<p>Clients should disable Telegram Stars support for the current user if the <a href="/api/config#stars-purchase-blocked">stars_purchase_blocked field is equal to <code>true</code>&nbsp;&raquo;</a> due to regional limitations.  </p>
<h3><a class="anchor" name="balance-and-transaction-history" href="#balance-and-transaction-history"><i class="anchor-icon"></i></a>Balance and transaction history</h3>
<pre><code>inputStarsTransaction#206ae6d1 flags:# refund:flags.0?true id:string = InputStarsTransaction;

starsTransactionPeerAppStore#b457b375 = StarsTransactionPeer;
starsTransactionPeerPlayMarket#7b560a0b = StarsTransactionPeer;
starsTransactionPeerPremiumBot#250dbaf8 = StarsTransactionPeer;
starsTransactionPeerFragment#e92fd902 = StarsTransactionPeer;
starsTransactionPeer#d80da15d peer:Peer = StarsTransactionPeer;
starsTransactionPeerAds#60682812 = StarsTransactionPeer;
starsTransactionPeerUnsupported#95f2bfe4 = StarsTransactionPeer;

starsTransaction#64dfc926 flags:# refund:flags.3?true pending:flags.4?true failed:flags.6?true gift:flags.10?true reaction:flags.11?true id:string stars:StarsAmount date:int peer:StarsTransactionPeer title:flags.0?string description:flags.1?string photo:flags.2?WebDocument transaction_date:flags.5?int transaction_url:flags.5?string bot_payload:flags.7?bytes msg_id:flags.8?int extended_media:flags.9?Vector&lt;MessageMedia&gt; subscription_period:flags.12?int giveaway_post_id:flags.13?int stargift:flags.14?StarGift floodskip_number:flags.15?int starref_commission_permille:flags.16?int starref_peer:flags.17?Peer starref_amount:flags.17?StarsAmount = StarsTransaction;

payments.starsStatus#6c9ce8ed flags:# balance:StarsAmount subscriptions:flags.1?Vector&lt;StarsSubscription&gt; subscriptions_next_offset:flags.2?string subscriptions_missing_balance:flags.4?long history:flags.3?Vector&lt;StarsTransaction&gt; next_offset:flags.0?string chats:Vector&lt;Chat&gt; users:Vector&lt;User&gt; = payments.StarsStatus;

updateStarsBalance#4e80a379 balance:StarsAmount = Update;

---functions---

payments.getStarsStatus#104fcfa7 peer:InputPeer = payments.StarsStatus;

payments.getStarsTransactions#69da4557 flags:# inbound:flags.0?true outbound:flags.1?true ascending:flags.2?true subscription_id:flags.3?string peer:InputPeer offset:string limit:int = payments.StarsStatus;

payments.getStarsTransactionsByID#27842d2e peer:InputPeer id:Vector&lt;InputStarsTransaction&gt; = payments.StarsStatus;</code></pre>
<p>Use <a href="/method/payments.getStarsStatus">payments.getStarsStatus</a> to get the current stars balance of the current account (with peer=<a href="/constructor/inputPeerSelf">inputPeerSelf</a>), or the stars balance of the bot or channel specified in <code>peer</code>.<br>The method will also return the last 5 <a href="/constructor/starsTransaction">star transactions&nbsp;&raquo;</a>.<br>To return all <a href="/constructor/starsTransaction">star transactions&nbsp;&raquo;</a> (and optionally search using filters), use <a href="/method/payments.getStarsTransactions">payments.getStarsTransactions</a>, paginating through the transactions passing the returned <code>next_offset</code> (if set) to <code>offset</code> <a href="/api/offsets">as usual</a>.  </p>
<p><a href="/method/payments.getStarsTransactionsByID">payments.getStarsTransactionsByID</a> may be used to fetch info about specific Telegram Star transactions (or refunds) using their IDs, passed as <a href="/constructor/inputStarsTransaction">inputStarsTransaction</a> constructors.  </p>
<p>Changes in the star balance (through <a href="#buying-or-gifting-stars">topups</a> or <a href="#using-stars">purchases</a>) will be notified by the server via an <a href="/constructor/updateStarsBalance">updateStarsBalance</a> update.</p>
<h3><a class="anchor" name="revenue-statistics" href="#revenue-statistics"><i class="anchor-icon"></i></a>Revenue statistics</h3>
<pre><code>starsRevenueStatus#febe5491 flags:# withdrawal_enabled:flags.0?true current_balance:StarsAmount available_balance:StarsAmount overall_revenue:StarsAmount next_withdrawal_at:flags.1?int = StarsRevenueStatus;

payments.starsRevenueStats#c92bb73b revenue_graph:StatsGraph status:StarsRevenueStatus usd_rate:double = payments.StarsRevenueStats;

updateStarsRevenueStatus#a584b019 peer:Peer status:StarsRevenueStatus = Update;

---functions---

payments.getStarsRevenueStats#d91ffad6 flags:# dark:flags.0?true peer:InputPeer = payments.StarsRevenueStats;</code></pre>
<p>Telegram Star revenue statistics may be fetched by bot owners, and by channel admins if the <a href="/constructor/channelFull">channelFull</a>.<code>can_view_stars_revenue</code> flag is set.  </p>
<p>Use <a href="/method/payments.getStarsRevenueStats">payments.getStarsRevenueStats</a> to fetch statistics about earned Telegram Stars; the returned <a href="/type/StatsGraph">StatsGraph</a> graphs can be rendered <a href="/api/stats#graph-visualization">as described here&nbsp;&raquo;</a>.  </p>
<p>Specifically:</p>
<ul>
<li><code>revenue_graph</code> - Star revenue graph (number of earned stars)</li>
<li><code>status</code> - Current balance, current withdrawable balance and overall earned Telegram Stars</li>
<li><code>usd_rate</code> - Current conversion rate of Telegram Stars to USD</li>
</ul>
<p>The server will emit an <a href="/constructor/updateStarsRevenueStatus">updateStarsRevenueStatus</a> every time the balance changes; if the client is currently in the Monetization tab of the channel or bot, this update should apply the new balances (contained in the update), and refresh the transaction list using <a href="/method/payments.getStarsTransactions">payments.getStarsTransactions</a> as specified <a href="#balance-and-transaction-history">here&nbsp;&raquo;</a>.  </p>
<h3><a class="anchor" name="buying-or-gifting-stars" href="#buying-or-gifting-stars"><i class="anchor-icon"></i></a>Buying or gifting stars</h3>
<pre><code>starsTopupOption#bd915c0 flags:# extended:flags.1?true stars:long store_product:flags.0?string currency:string amount:long = StarsTopupOption;

starsGiftOption#5e0589f1 flags:# extended:flags.1?true stars:long store_product:flags.0?string currency:string amount:long = StarsGiftOption;

inputStorePaymentStarsTopup#dddd0f56 stars:long currency:string amount:long = InputStorePaymentPurpose;
inputStorePaymentStarsGift#1d741ef7 user_id:InputUser stars:long currency:string amount:long = InputStorePaymentPurpose;

inputInvoiceStars#65f00ce3 purpose:InputStorePaymentPurpose = InputInvoice;

---functions---

payments.getStarsTopupOptions#c00ec7d3 = Vector&lt;StarsTopupOption&gt;;

payments.getStarsGiftOptions#d3c96bc8 flags:# user_id:flags.0?InputUser = Vector&lt;StarsGiftOption&gt;;</code></pre>
<p>To purchase telegram stars for ourselves, first invoke the <a href="/method/payments.getStarsTopupOptions">payments.getStarsTopupOptions</a> method, to obtain a list of topup options as <a href="/constructor/starsTopupOption">starsTopupOption</a> constructors.  </p>
<p>To purchase telegram stars for a friend, first invoke the <a href="/method/payments.getStarsGiftOptions">payments.getStarsGiftOptions</a> method, to obtain a list of gift options as <a href="/constructor/starsGiftOption">starsGiftOption</a> constructors.  </p>
<p><strong>Note</strong>: Star gifting functionality should only be enabled if the <a href="/api/config#stars-gifts-enabled">stars_gifts_enabled&nbsp;&raquo;</a> flag is equal to true.  </p>
<p>Once the user has chosen a specific star topup/gift option, invoke <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a>, passing an <a href="/constructor/inputInvoiceStars">inputInvoiceStars</a>, with either <a href="/constructor/inputStorePaymentStarsTopup">inputStorePaymentStarsTopup</a> or <a href="/constructor/inputStorePaymentStarsGift">inputStorePaymentStarsGift</a>, populated with the values from the chosen <a href="/constructor/starsTopupOption">starsTopupOption</a>/<a href="/constructor/starsGiftOption">starsGiftOption</a>.</p>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">invoice payment flow as described in the payments documentation&nbsp;&raquo;</a>.  </p>
<p>More alternative payment flows are also available:</p>
<ul>
<li>Payment via <a href="https://fragment.com">Fragment</a>, which also allows making larger purchases.</li>
<li>The store-based subscription flow based on <a href="/method/payments.assignAppStoreTransaction">payments.assignAppStoreTransaction</a>/<a href="/method/payments.assignPlayMarketTransaction">payments.assignPlayMarketTransaction</a>, currently not available to third-party apps.  </li>
</ul>
<p>For gifts, once the payment is successfully processed, the user to which the gift was sent will automatically receive a <a href="/constructor/messageService">messageService</a> from the user that sent the gift, containing a <a href="/constructor/messageActionGiftStars">messageActionGiftStars</a> constructor with further info about the price and duration of the gifted Telegram Stars.<br>Clients should display this message, along with a sticker from the <a href="/constructor/inputStickerSetPremiumGifts">inputStickerSetPremiumGifts</a> <a href="/api/stickers">stickerset</a>: here&#39;s an <a href="https://telegram.org/blog/w3-browser-mini-app-store#gifting-stars-to-friends">example</a>.  </p>
<p>The price in US dollars of 1000 Telegram Stars can be fetched using the <a href="/api/config#stars-usd-sell-rate-x1000"><code>stars_usd_sell_rate_x1000</code> config parameter &raquo;</a>.</p>
<p>The Star topup page should also be activated, if <a href="/api/links#stars-topup">some conditions</a> are met, when the user clicks on a <a href="/api/links#stars-topup">topup deep link &raquo;</a>.  </p>
<h3><a class="anchor" name="using-stars" href="#using-stars"><i class="anchor-icon"></i></a>Using stars</h3>
<pre><code>payments.paymentFormStars#7bf6b15c flags:# form_id:long bot_id:long title:string description:string photo:flags.5?WebDocument invoice:Invoice users:Vector&lt;User&gt; = payments.PaymentForm;

payments.paymentReceiptStars#dabbf83a flags:# date:int bot_id:long title:string description:string photo:flags.2?WebDocument invoice:Invoice currency:string total_amount:long transaction_id:string users:Vector&lt;User&gt; = payments.PaymentReceipt;

---functions---

payments.sendStarsForm#7998c914 form_id:long invoice:InputInvoice = payments.PaymentResult;

payments.refundStarsCharge#25ae8f4a user_id:InputUser charge_id:string = Updates;</code></pre>
<p>The full flow to follow to make purchases using Telegram Stars is described along the traditional payment flow in the <a href="/api/payments">payments documentation&nbsp;&raquo;</a>: all invoices and constructors working with currency amounts will use the currency code <code>XTR</code>, and the amounts will be in Telegram Stars.  </p>
<h4><a class="anchor" name="paid-media" href="#paid-media"><i class="anchor-icon"></i></a>Paid media</h4>
<p>Telegram Stars are used to pay for <a href="/api/paid-media">paid media</a>, which may be posted on channels by administrators as specified <a href="/api/paid-media">here&nbsp;&raquo;</a>.  </p>
<p>Purchasing paid media will transfer Telegram Stars to the channel&#39;s balance.<br>Channel owners can then <a href="#withdrawing-revenue">withdraw Stars as Toncoin&nbsp;&raquo;</a>, or <a href="#paying-for-ads">use Stars to place ads for the channel&nbsp;&raquo;</a>.  </p>
<p><a href="#revenue-statistics">Star revenue statistics</a> and <a href="#balance-and-transaction-history">balance information</a> is also available to channel owners.  </p>
<h4><a class="anchor" name="paid-reactions" href="#paid-reactions"><i class="anchor-icon"></i></a>Paid reactions</h4>
<p>Users can now directly support their favorite channels and content creators by sending them Telegram Stars using a new Star reaction.</p>
<p>Channel owners receive 100% of the stars — and can convert them into Toncoin cryptocurrency rewards or subsidized ads.</p>
<p>See <a href="/api/reactions#paid-reactions">here &raquo;</a> for the full flow.</p>
<h4><a class="anchor" name="bot-payments" href="#bot-payments"><i class="anchor-icon"></i></a>Bot payments</h4>
<p>Telegram Stars are also used to pay for digital services in bots, using <a href="/constructor/keyboardButtonBuy">keyboardButtonBuy</a> and <a href="/api/payments">the usual payment flow&nbsp;&raquo;</a>, with <code>currency=&quot;XTR&quot;</code>.  </p>
<p>Purchasing paid media will transfer Telegram Stars to the bot&#39;s balance.<br>Bot owners can then <a href="#withdrawing-revenue">withdraw Stars as Toncoin&nbsp;&raquo;</a>, or <a href="#paying-for-ads">use Stars to place ads for the channel&nbsp;&raquo;</a>.  </p>
<p><a href="#revenue-statistics">Star revenue statistics</a> and <a href="#balance-and-transaction-history">balance information</a> is also available to bot owners.  </p>
<h4><a class="anchor" name="star-subscriptions" href="#star-subscriptions"><i class="anchor-icon"></i></a>Star subscriptions</h4>
<p>Channel administrators can now create special <a href="/api/invites#invite-links">invite links</a> that allow joining a channel in exchange for a monthly payment in Telegram Stars.  </p>
<p>Subscribing to a channel using a paid invite link will transfer Telegram Stars to the channel&#39;s balance.  </p>
<p>See <a href="/api/invites#paid-invite-links">here &raquo;</a> for the full flow.  </p>
<h4><a class="anchor" name="star-giveaways" href="#star-giveaways"><i class="anchor-icon"></i></a>Star giveaways</h4>
<p>Star giveaways are similar to <a href="/api/giveaways#giveaways-and-giftcodes">normal giveaways</a>, with the only difference that instead of giving away gifts or <a href="/api/premium">Telegram Premium subscriptions</a>, the giveaway will automatically distribute Telegram Stars among the winners.</p>
<p>See <a href="/api/giveaways#star-giveaways">here &raquo;</a> for the full flow.  </p>
<h4><a class="anchor" name="star-gifts" href="#star-gifts"><i class="anchor-icon"></i></a>Star gifts</h4>
<p>Users can send <strong>Gifts</strong> to their friends. The recipients of gifts can display them on their profile pages or turn them into Telegram Stars. </p>
<p>See <a href="/api/gifts">here &raquo;</a> for the full flow.  </p>
<h3><a class="anchor" name="withdrawing-stars" href="#withdrawing-stars"><i class="anchor-icon"></i></a>Withdrawing stars</h3>
<pre><code>payments.starsRevenueWithdrawalUrl#1dab80b7 url:string = payments.StarsRevenueWithdrawalUrl;
---functions---

payments.getStarsRevenueWithdrawalUrl#13bbe8b3 peer:InputPeer stars:long password:InputCheckPasswordSRP = payments.StarsRevenueWithdrawalUrl;</code></pre>
<p>To withdraw funds from the star balance of a channel or bot we own, invoke <a href="/method/payments.getStarsRevenueWithdrawalUrl">payments.getStarsRevenueWithdrawalUrl</a>, passing the current account&#39;s <a href="/api/srp">2FA password</a> as an <a href="/type/InputCheckPasswordSRP">InputCheckPasswordSRP</a> constructor, generated <a href="/api/srp">as specified here&nbsp;&raquo;</a>.  </p>
<p>Only the channel/bot owner can invoke this method, and only if the balance is bigger than or equal to <a href="/api/config#stars-revenue-withdrawal-min">stars_revenue_withdrawal_min&nbsp;&raquo;</a> and the <code>status.withdrawal_enabled</code> flag returned by <a href="/method/payments.getStarsRevenueStats">payments.getStarsRevenueStats</a> is set.  </p>
<p>The method will return a unique URL to a <a href="https://fragment.com/">Fragment</a> page where the user will be able to specify and submit the address of the TON wallet where the funds will be sent.  </p>
<p>By withdrawing one thousand stars, the user will receive the equivalent of <a href="/api/config#stars-usd-withdraw-rate-x1000"><code>stars_usd_withdraw_rate_x1000</code> US dollars, as specified by the client configuration &raquo;</a>.  </p>
<h3><a class="anchor" name="paying-for-ads" href="#paying-for-ads"><i class="anchor-icon"></i></a>Paying for ads</h3>
<pre><code>starsTransactionPeerAds#60682812 = StarsTransactionPeer;

payments.starsRevenueAdsAccountUrl#394e7f21 url:string = payments.StarsRevenueAdsAccountUrl;

---functions---

payments.getStarsRevenueAdsAccountUrl#d1d7efc5 peer:InputPeer = payments.StarsRevenueAdsAccountUrl;</code></pre>
<p>Channel/bot owners may place Telegram advertisements for channels/bots they own using the Telegram Ad platform, paying using the <strong>Stars</strong> currently available on the bot/channel&#39;s balance at a special rate with a <strong>30% discount</strong> – creating a <strong>cost-effective</strong> way of reaching new users.  </p>
<p>To use Stars for ads, go to your bot&#39;s or channels&#39; Balance or Monetization section and tap &#39;<em>Buy Ads</em>&#39;.<br>Clicking on the button should invoke <a href="/method/payments.getStarsRevenueAdsAccountUrl">payments.getStarsRevenueAdsAccountUrl</a> (passing the bot/channel in <code>peer</code>).<br>The returned <code>url</code> will lead to a page where the user will be able to place ads for the channel/bot passed in <code>peer</code>.  </p>
<p><a href="#balance-and-transaction-history">Transactions</a> for ad payments will be of type <a href="/constructor/starsTransactionPeerAds">starsTransactionPeerAds</a>.  </p>
</div>
  
</div>
          
        </div>
      </div>
      <div class="footer_wrap">
  <div class="footer_columns_wrap footer_desktop">
    <div class="footer_column footer_column_telegram">
      <h5>Telegram</h5>
      <div class="footer_telegram_description"></div>
      Telegram is a cloud-based mobile and desktop messaging app with a focus on security and speed.
    </div>

    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
      <ul>
        <li><a href="//telegram.org/faq">FAQ</a></li>
        <li><a href="//telegram.org/privacy">Privacy</a></li>
        <li><a href="//telegram.org/press">Press</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#mobile-apps">Mobile Apps</a></h5>
      <ul>
        <li><a href="//telegram.org/dl/ios">iPhone/iPad</a></li>
        <li><a href="//telegram.org/android">Android</a></li>
        <li><a href="//telegram.org/dl/web">Mobile Web</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#desktop-apps">Desktop Apps</a></h5>
      <ul>
        <li><a href="//desktop.telegram.org/">PC/Mac/Linux</a></li>
        <li><a href="//macos.telegram.org/">macOS</a></li>
        <li><a href="//telegram.org/dl/web">Web-browser</a></li>
      </ul>
    </div>
    <div class="footer_column footer_column_platform">
      <h5><a href="//core.telegram.org/">Platform</a></h5>
      <ul>
        <li><a href="//core.telegram.org/api">API</a></li>
        <li><a href="//translations.telegram.org/">Translations</a></li>
        <li><a href="//instantview.telegram.org/">Instant View</a></li>
      </ul>
    </div>
  </div>
  <div class="footer_columns_wrap footer_mobile">
    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/blog">Blog</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/press">Press</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/moderation">Moderation</a></h5>
    </div>
  </div>
</div>
    </div>
    <script src="/js/main.js?47"></script>
    <script src="/js/jquery.min.js?1"></script>
<script src="/js/bootstrap.min.js?1"></script>

    <script>window.initDevPageNav&&initDevPageNav();
backToTopInit("Go up");
removePreloadInit();
</script>
  </body>
</html>

