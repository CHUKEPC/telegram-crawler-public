<!DOCTYPE html>
<html class="">
  <head>
    <meta charset="utf-8">
    <title>Telegram Gifts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="description" content="Users can send Gifts to their friends. The recipients of gifts can display them on their profile pages or turn them into Telegram Stars &amp;raquo;. Telegram Stars can be used for many things, including supporting creators and buying services in mini apps.">
    <meta property="og:title" content="Telegram Gifts">
    <meta property="og:image" content="">
    <meta property="og:description" content="Users can send Gifts to their friends. The recipients of gifts can display them on their profile pages or turn them into Telegram Stars &amp;raquo;. Telegram Stars can be used for many things, including supporting creators and buying services in mini apps.">
    <link rel="icon" type="image/svg+xml" href="/img/website_icon.svg?4">
<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="alternate icon" href="/img/favicon.ico" type="image/x-icon" />
    <link href="/css/bootstrap.min.css?3" rel="stylesheet">
    
    <link href="/css/telegram.css?247" rel="stylesheet" media="screen">
    <style>
    </style>
  </head>
  <body class="preload">
    <div class="dev_page_wrap">
      <div class="dev_page_head navbar navbar-static-top navbar-tg">
        <div class="navbar-inner">
          <div class="container clearfix">
            <ul class="nav navbar-nav navbar-right hidden-xs"><li class="navbar-twitter"><a href="https://twitter.com/telegram" target="_blank" data-track="Follow/Twitter" onclick="trackDlClick(this, event)"><i class="icon icon-twitter"></i><span> Twitter</span></a></li></ul>
            <ul class="nav navbar-nav">
              <li><a href="//telegram.org/">Home</a></li>
<li class="hidden-xs"><a href="//telegram.org/faq">FAQ</a></li>
<li class="hidden-xs"><a href="//telegram.org/apps">Apps</a></li>
<li class="active"><a href="/api">API</a></li>
<li class=""><a href="/mtproto">Protocol</a></li>
<li class=""><a href="/schema">Schema</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container clearfix">
        <div class="dev_page">
          <div id="dev_page_content_wrap" class=" ">
  <div class="dev_page_bread_crumbs"><ul class="breadcrumb clearfix"><li><a  href="/api" >API</a></li><i class="icon icon-breadcrumb-divider"></i><li><a  href="/api/gifts" >Telegram Gifts</a></li></ul></div>
  <h1 id="dev_page_title">Telegram Gifts</h1>
  
  <div id="dev_page_content"><!-- scroll_nav -->


<p>Users can send <strong>Gifts</strong> to their friends. The recipients of gifts can display them on their profile pages or turn them into <a href="/api/stars">Telegram Stars &raquo;</a>. Telegram Stars can be used for many things, including supporting creators and buying services in mini apps.</p>
<h3><a class="anchor" name="sending-gifts" href="#sending-gifts"><i class="anchor-icon"></i></a>Sending gifts</h3>
<pre><code>payments.starGiftsNotModified#a388a368 = payments.StarGifts;
payments.starGifts#2ed82995 hash:int gifts:Vector&lt;StarGift&gt; chats:Vector&lt;Chat&gt; users:Vector&lt;User&gt; = payments.StarGifts;

starGift#80ac53c3 flags:# limited:flags.0?true sold_out:flags.1?true birthday:flags.2?true require_premium:flags.7?true limited_per_user:flags.8?true id:long sticker:Document stars:long availability_remains:flags.0?int availability_total:flags.0?int availability_resale:flags.4?long convert_stars:long first_sale_date:flags.1?int last_sale_date:flags.1?int upgrade_stars:flags.3?long resell_min_stars:flags.4?long title:flags.5?string released_by:flags.6?Peer per_user_total:flags.8?int per_user_remains:flags.8?int locked_until_date:flags.9?int = StarGift;

payments.checkCanSendGiftResultOk#374fa7ad = payments.CheckCanSendGiftResult;
payments.checkCanSendGiftResultFail#d5e58274 reason:TextWithEntities = payments.CheckCanSendGiftResult;

inputInvoiceStarGift#e8625e92 flags:# hide_name:flags.0?true include_upgrade:flags.2?true peer:InputPeer gift_id:long message:flags.1?TextWithEntities = InputInvoice;
inputInvoiceStarGiftResale#c39f5324 flags:# ton:flags.0?true slug:string to_id:InputPeer = InputInvoice;

messageActionStarGift#f24de7fa flags:# name_hidden:flags.0?true saved:flags.2?true converted:flags.3?true upgraded:flags.5?true refunded:flags.9?true can_upgrade:flags.10?true prepaid_upgrade:flags.13?true upgrade_separate:flags.16?true gift:StarGift message:flags.1?TextWithEntities convert_stars:flags.4?long upgrade_msg_id:flags.5?int upgrade_stars:flags.8?long from_id:flags.11?Peer peer:flags.12?Peer saved_id:flags.12?long prepaid_upgrade_hash:flags.14?string gift_msg_id:flags.15?int = MessageAction;

inputPrivacyKeyStarGiftsAutoSave#e1732341 = InputPrivacyKey;
privacyKeyStarGiftsAutoSave#2ca4fdf8 = PrivacyKey;

---functions---

payments.getStarGifts#c4563590 hash:int = payments.StarGifts;
payments.checkCanSendGift#c0c4edc9 gift_id:long = payments.CheckCanSendGiftResult;
payments.saveStarGift#2a2a697c flags:# unsave:flags.0?true stargift:InputSavedStarGift = Bool;
payments.convertStarGift#74bf076b stargift:InputSavedStarGift = Bool;</code></pre>
<p>If the <a href="/constructor/userFull">userFull</a>.<code>display_gifts_button</code> flag of both us and another user is set (changed through <a href="/constructor/globalPrivacySettings">globalPrivacySettings</a>), a gift button should always be displayed in the text field in private chats with the other user: once clicked, the gift UI should be displayed, offering the user options to gift <a href="/api/premium#gifting-telegram-premium">Telegram Premium &raquo;</a> subscriptions or <a href="/api/gifts">Telegram Gifts &raquo;</a>. </p>
<p>The same gifting UI should always be (unconditionally) available through a chat picker, activated by a “Send a Gift” entry in the app&#39;s settings.  </p>
<p>Users may disallow the reception of specific gift types by populating the <a href="/constructor/globalPrivacySettings">globalPrivacySettings</a>.<code>disallowed_gifts</code> flag, visible to other users in <a href="/constructor/userFull">userFull</a>.<code>disallowed_gifts</code>.  </p>
<p>Use <a href="/method/payments.getStarGifts">payments.getStarGifts</a> to obtain the full list of of available <a href="/constructor/starGift">starGifts</a>; this method may return some sold-out gifts that have the <code>availability_resale</code> flag set, which indicates that some gifts of this type are on <a href="#reselling-collectible-gifts">resale &raquo;</a>, use <a href="/method/payments.getResaleStarGifts">payments.getResaleStarGifts</a> to fetch them.  </p>
<p><a href="/constructor/starGift">starGift</a>s with the <code>limited_per_user</code> flag set and <code>per_user_remains &lt;= 0</code> cannot be bought by the current user, since they already <code>per_user_total</code> gifts of the same type.  </p>
<p><a href="/constructor/starGift">starGift</a>s with the <code>locked_until_date</code> flag set <em>possibly</em> cannot be bought until the specified unixtime: to verify if that is the case, invoke <a href="/method/payments.checkCanSendGift">payments.checkCanSendGift</a>.<br>This method will return a <a href="/constructor/payments.checkCanSendGiftResultFail">payments.checkCanSendGiftResultFail</a> if the gift cannot be sent, along with a localized description specifying why it cannot be sent yet.<br>Otherwise, it will return <a href="/constructor/payments.checkCanSendGiftResultOk">payments.checkCanSendGiftResultOk</a>, in which case the client should still check if the <a href="/constructor/starGift">starGift</a>.<code>require_premium</code> flag is set, and if yes, require the user to purchase a <a href="/api/premium">Telegram Premium</a> subscription (if they aren&#39;t subscribed already).  </p>
<p>Once the user chooses a sendable, (non-<code>sold_out</code>) gift, they may buy it spending <a href="/constructor/starGift">starGift</a>.<code>stars</code> <a href="/api/stars">Telegram Stars</a> from our balance by invoking <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a>, passing an <a href="/constructor/inputInvoiceStarGift">inputInvoiceStarGift</a>, passing the following parameters:</p>
<ul>
<li><code>peer</code>: Identifier of the user or channel (only if <a href="/constructor/channelFull">channelFull</a>.<code>stargifts_available</code> is set) that will receive the gift</li>
<li><code>gift_id</code>: Identifier of the gift, from <a href="/constructor/starGift">starGift</a>.<code>id</code></li>
<li><code>message</code>: Optional message, attached with the gift: the maximum length for this field is specified in the <a href="/api/config#stargifts-message-length-max">stargifts_message_length_max client configuration value &raquo;</a>.</li>
<li><code>hide_name</code>: If set, your name will be hidden if the destination peer decides to display the gift on their profile (they will still see that you sent the gift)</li>
<li><code>include_upgrade</code>: Set this flag to additionally prepay <a href="/constructor/starGift">starGift</a>.<code>upgrade_stars</code> <a href="/api/stars">Telegram Stars</a>, allowing the receiver to convert the gift to a <a href="#collectible-gifts">collectible gift &raquo;</a> without paying anything.<br>Note that this flag can only be set if <a href="/constructor/starGift">starGift</a>.<code>upgrade_stars</code> is set.  </li>
</ul>
<p>When buying a gift from the list of gifts currently on <a href="#reselling-collectible-gifts">resale &raquo;</a>, pass an <a href="/constructor/inputInvoiceStarGiftResale">inputInvoiceStarGiftResale</a> instead:</p>
<ul>
<li><code>slug</code>: Taken from the returned <a href="/constructor/starGiftUnique">starGiftUnique</a>.<code>slug</code>, or from the link</li>
<li><code>to_id</code>: Identifier of the user or channel that will receive the gift</li>
</ul>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">usual payment flow &raquo;</a>.  </p>
<p>Once the payment is completed, the destination peer will receive a <a href="/constructor/messageService">messageService</a> with a <a href="/constructor/messageActionStarGift">messageActionStarGift</a> from us, containing info about the received gift.  </p>
<p>The peer may then choose to display the received gift on their profile using <a href="/method/payments.saveStarGift">payments.saveStarGift</a>.<br>Received gifts may also be automatically displayed on the profile, depending on the destination peer&#39;s <a href="/api/privacy">privacy settings</a> (<a href="/constructor/inputPrivacyKeyStarGiftsAutoSave">inputPrivacyKeyStarGiftsAutoSave</a> key).  </p>
<p>Alternatively, the gift may be converted into <a href="/api/stars">Telegram Stars</a> using <a href="/method/payments.convertStarGift">payments.convertStarGift</a>; the latter operation will permanently destroy the gift, converting it into <a href="/constructor/starGift">starGift</a>.<code>convert_stars</code> Telegram Stars, added to the user&#39;s balance (note that <a href="/constructor/starGift">starGift</a>.<code>convert_stars</code> will be less than the buying price (<a href="/constructor/starGift">starGift</a>.<code>stars</code>) of the gift if it was originally bought using Telegram Stars bought a long time ago).<br>A gift can be converted back into <a href="/api/stars">Telegram Stars</a> only if it was received less than <a href="/api/config#stargifts-convert-period-max"><code>stargifts_convert_period_max</code> seconds ago, as specified by the client configuration &raquo;</a>.  </p>
<p>If the user decides to display the received gift on their profile, it will be fetchable by all users as specified <a href="#list-all-received-gifts">here &raquo;</a>.<br>The same method may also be used to fetch all gifts received by owned peers from any user.</p>
<p>Note that gift support must disabled if the <a href="/api/config"><code>stargifts_blocked</code> client configuration flag &raquo;</a> is set to true.</p>
<h3><a class="anchor" name="list-all-received-gifts" href="#list-all-received-gifts"><i class="anchor-icon"></i></a>List all received gifts</h3>
<pre><code>payments.savedStarGifts#95f389b1 flags:# count:int chat_notifications_enabled:flags.1?Bool gifts:Vector&lt;SavedStarGift&gt; next_offset:flags.0?string chats:Vector&lt;Chat&gt; users:Vector&lt;User&gt; = payments.SavedStarGifts;

---functions---

payments.getSavedStarGifts#a319e569 flags:# exclude_unsaved:flags.0?true exclude_saved:flags.1?true exclude_unlimited:flags.2?true exclude_unique:flags.4?true sort_by_value:flags.5?true exclude_upgradable:flags.7?true exclude_unupgradable:flags.8?true peer:InputPeer collection_id:flags.6?int offset:string limit:int = payments.SavedStarGifts;</code></pre>
<p><a href="/method/payments.getSavedStarGifts">payments.getSavedStarGifts</a> may be used to fetch the full list of gifts received by a peer, such as:</p>
<ul>
<li>A user, with peer=<a href="/constructor/inputPeerUser">inputPeerUser</a> (including users different from us)</li>
<li>A channel, with peer=<a href="/constructor/inputPeerChannel">inputPeerChannel</a> (including channels we don&#39;t own)</li>
<li>A <a href="/api/bots/connected-business-bots">connected business user</a> (when executing the method as a bot, over the business connection), with peer=<a href="/constructor/inputPeerUser">inputPeerUser</a> of the controlled user</li>
</ul>
<p>The method&#39;s parameters may be used to filter out gifts based on various criteria, see the <a href="/method/payments.getSavedStarGifts">method page</a> for more info.  </p>
<p>Note that unlike what the name suggests, the method can be used to fetch both “saved” and “unsaved” gifts (aka gifts both pinned and not pinned to the profile) for users and channels we own/control, depending on the passed flags.  </p>
<h3><a class="anchor" name="list-specific-owned-gifts" href="#list-specific-owned-gifts"><i class="anchor-icon"></i></a>List specific owned gifts</h3>
<pre><code>inputSavedStarGiftUser#69279795 msg_id:int = InputSavedStarGift;
inputSavedStarGiftChat#f101aa7f peer:InputPeer saved_id:long = InputSavedStarGift;
inputSavedStarGiftSlug#2085c238 slug:string = InputSavedStarGift;

payments.savedStarGifts#95f389b1 flags:# count:int chat_notifications_enabled:flags.1?Bool gifts:Vector&lt;SavedStarGift&gt; next_offset:flags.0?string chats:Vector&lt;Chat&gt; users:Vector&lt;User&gt; = payments.SavedStarGifts;

---functions---

payments.getSavedStarGift#b455a106 stargift:Vector&lt;InputSavedStarGift&gt; = payments.SavedStarGifts;</code></pre>
<p><a href="/method/payments.getSavedStarGift">payments.getSavedStarGift</a> may be used to fetch info about specific gifts owned by a peer we control.  </p>
<p>Note that unlike what the name suggests, the method can be used to fetch both “saved” and “unsaved” gifts (aka gifts both pinned and not pinned to the profile).  </p>
<h3><a class="anchor" name="notifications-for-received-channel-gifts" href="#notifications-for-received-channel-gifts"><i class="anchor-icon"></i></a>Notifications for received channel gifts</h3>
<pre><code>---functions---

payments.toggleChatStarGiftNotifications#60eaefa1 flags:# enabled:flags.0?true peer:InputPeer = Bool;</code></pre>
<p><a href="/method/payments.toggleChatStarGiftNotifications">payments.toggleChatStarGiftNotifications</a> can be used to enable or disable the reception of notifications every time a <a href="/api/gifts">gift &raquo;</a> is received by the specified channel: it can only be invoked by admins with <code>post_messages</code> <a href="/constructor/chatAdminRights">admin rights</a>.</p>
<p>The notifications will be received in the form of <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a> and <a href="/constructor/messageActionStarGift">messageActionStarGift</a> service messages from the channel.</p>
<h3><a class="anchor" name="pinning-a-received-gift" href="#pinning-a-received-gift"><i class="anchor-icon"></i></a>Pinning a received gift</h3>
<pre><code>---functions---

payments.toggleStarGiftsPinnedToTop#1513e7b0 peer:InputPeer stargift:Vector&lt;InputSavedStarGift&gt; = Bool;</code></pre>
<p>A received gift can be pinned on top of the profile of the user or owned channels by using <a href="/method/payments.toggleStarGiftsPinnedToTop">payments.toggleStarGiftsPinnedToTop</a>.</p>
<p>The maximum number of gifts that can be pinned to a profile is specified in the <a href="/api/config#stargifts-pinned-to-top-limit">stargifts_pinned_to_top_limit client configuration key &raquo;</a>.  </p>
<h3><a class="anchor" name="gift-collections" href="#gift-collections"><i class="anchor-icon"></i></a>Gift collections</h3>
<pre><code>inputSavedStarGiftUser#69279795 msg_id:int = InputSavedStarGift;
inputSavedStarGiftChat#f101aa7f peer:InputPeer saved_id:long = InputSavedStarGift;
inputSavedStarGiftSlug#2085c238 slug:string = InputSavedStarGift;

starGiftCollection#9d6b13b0 flags:# collection_id:int title:string icon:flags.0?Document gifts_count:int hash:long = StarGiftCollection;

payments.starGiftCollectionsNotModified#a0ba4f17 = payments.StarGiftCollections;
payments.starGiftCollections#8a2932f3 collections:Vector&lt;StarGiftCollection&gt; = payments.StarGiftCollections;

---functions---

payments.createStarGiftCollection#1f4a0e87 peer:InputPeer title:string stargift:Vector&lt;InputSavedStarGift&gt; = StarGiftCollection;
payments.getStarGiftCollections#981b91dd peer:InputPeer hash:long = payments.StarGiftCollections;
payments.updateStarGiftCollection#4fddbee7 flags:# peer:InputPeer collection_id:int title:flags.0?string delete_stargift:flags.1?Vector&lt;InputSavedStarGift&gt; add_stargift:flags.2?Vector&lt;InputSavedStarGift&gt; order:flags.3?Vector&lt;InputSavedStarGift&gt; = StarGiftCollection;
payments.reorderStarGiftCollections#c32af4cc peer:InputPeer order:Vector&lt;int&gt; = Bool;
payments.deleteStarGiftCollection#ad5648e8 peer:InputPeer collection_id:int = Bool;

payments.getSavedStarGifts#a319e569 flags:# exclude_unsaved:flags.0?true exclude_saved:flags.1?true exclude_unlimited:flags.2?true exclude_unique:flags.4?true sort_by_value:flags.5?true exclude_upgradable:flags.7?true exclude_unupgradable:flags.8?true peer:InputPeer collection_id:flags.6?int offset:string limit:int = payments.SavedStarGifts;</code></pre>
<p>Gift collections group together multiple owned gifts; each gift may be part of one or more collection.  </p>
<p>Use <a href="/method/payments.createStarGiftCollection">payments.createStarGiftCollection</a> to create a collection.  </p>
<p>Use <a href="/method/payments.getSavedStarGifts">payments.getSavedStarGifts</a> with the <code>collection_id</code> flag set to fetch gifts within a collection.  </p>
<p>Use <a href="/method/payments.getStarGiftCollections">payments.getStarGiftCollections</a> to list all star gift collections of a given peer.  </p>
<p><strong>Note</strong>: the <code>hash</code> parameter of <a href="/method/payments.getStarGiftCollections">payments.getStarGiftCollections</a> is generated by passing the <a href="/constructor/starGiftCollection">starGiftCollection</a>.<code>hash</code> field (<strong>not</strong> the <code>collection_id</code> field) of all previously returned collections, to avoid returning any results if the available collections and their content hasn&#39;t changed.  </p>
<p>Use <a href="/method/payments.updateStarGiftCollection">payments.updateStarGiftCollection</a> to add, remove or reorder gifts in the collection or rename the collection.  </p>
<p>Use <a href="/method/payments.reorderStarGiftCollections">payments.reorderStarGiftCollections</a> to reorder the collections on an owned peer&#39;s profile.  </p>
<p>Use <a href="/method/payments.deleteStarGiftCollection">payments.deleteStarGiftCollection</a> to delete a gift collection.  </p>
<p>A profile can contain a maximum of <a href="/api/config#stargifts-collections-limit">stargifts_collections_limit &raquo;</a> gift collections, each contaning a maximum of <a href="/api/config#stargifts-collection-gifts-limit">stargifts_collection_gifts_limit</a> gifts.  </p>
<p><a href="/api/links#gift-collection-links">Gift collection deep links &raquo;</a> can be used to share a gift collection.  </p>
<h3><a class="anchor" name="collectible-gifts" href="#collectible-gifts"><i class="anchor-icon"></i></a>Collectible gifts</h3>
<p>A <a href="#sending-gifts">received gift</a> may be upgraded to a <a href="https://telegram.org/blog/collectible-gifts-and-more#collectible-gifts">collectible gift</a>.  </p>
<p>Collectible gifts have <strong>special attributes</strong> and can be <strong>transferred</strong> to other users or <strong>auctioned</strong> on NFT marketplaces.  </p>
<p>When you upgrade a gift it unlocks a <strong>new appearance</strong> from dozens of <strong>custom variations</strong> made by Telegram artists. Collectibles also receive a random set of <strong>secondary attributes</strong>, including a background color, icon and number. This means every collectible gift is a <strong>unique work of art</strong> — and that some will be <strong>more rare</strong> than others.  </p>
<h4><a class="anchor" name="upgrade-a-gift-to-a-collectible-gift" href="#upgrade-a-gift-to-a-collectible-gift"><i class="anchor-icon"></i></a>Upgrade a gift to a collectible gift</h4>
<pre><code>messageActionStarGift#f24de7fa flags:# name_hidden:flags.0?true saved:flags.2?true converted:flags.3?true upgraded:flags.5?true refunded:flags.9?true can_upgrade:flags.10?true prepaid_upgrade:flags.13?true upgrade_separate:flags.16?true gift:StarGift message:flags.1?TextWithEntities convert_stars:flags.4?long upgrade_msg_id:flags.5?int upgrade_stars:flags.8?long from_id:flags.11?Peer peer:flags.12?Peer saved_id:flags.12?long prepaid_upgrade_hash:flags.14?string gift_msg_id:flags.15?int = MessageAction;
savedStarGift#19a9b572 flags:# name_hidden:flags.0?true unsaved:flags.5?true refunded:flags.9?true can_upgrade:flags.10?true pinned_to_top:flags.12?true upgrade_separate:flags.17?true from_id:flags.1?Peer date:int gift:StarGift message:flags.2?TextWithEntities msg_id:flags.3?int saved_id:flags.11?long convert_stars:flags.4?long upgrade_stars:flags.6?long can_export_at:flags.7?int transfer_stars:flags.8?long can_transfer_at:flags.13?int can_resell_at:flags.14?int collection_id:flags.15?Vector&lt;int&gt; prepaid_upgrade_hash:flags.16?string = SavedStarGift;

starGift#80ac53c3 flags:# limited:flags.0?true sold_out:flags.1?true birthday:flags.2?true require_premium:flags.7?true limited_per_user:flags.8?true id:long sticker:Document stars:long availability_remains:flags.0?int availability_total:flags.0?int availability_resale:flags.4?long convert_stars:long first_sale_date:flags.1?int last_sale_date:flags.1?int upgrade_stars:flags.3?long resell_min_stars:flags.4?long title:flags.5?string released_by:flags.6?Peer per_user_total:flags.8?int per_user_remains:flags.8?int locked_until_date:flags.9?int = StarGift;

starGiftAttributeModel#39d99013 name:string document:Document rarity_permille:int = StarGiftAttribute;
starGiftAttributePattern#13acff19 name:string document:Document rarity_permille:int = StarGiftAttribute;
starGiftAttributeBackdrop#d93d859c name:string backdrop_id:int center_color:int edge_color:int pattern_color:int text_color:int rarity_permille:int = StarGiftAttribute;
starGiftAttributeOriginalDetails#e0bff26c flags:# sender_id:flags.0?Peer recipient_id:Peer date:int message:flags.1?TextWithEntities = StarGiftAttribute;

payments.starGiftUpgradePreview#167bd90b sample_attributes:Vector&lt;StarGiftAttribute&gt; = payments.StarGiftUpgradePreview;

inputSavedStarGiftUser#69279795 msg_id:int = InputSavedStarGift;
inputSavedStarGiftChat#f101aa7f peer:InputPeer saved_id:long = InputSavedStarGift;
inputSavedStarGiftSlug#2085c238 slug:string = InputSavedStarGift;

---functions---

payments.getStarGiftUpgradePreview#9c9abcb1 gift_id:long = payments.StarGiftUpgradePreview;
payments.upgradeStarGift#aed6e4f5 flags:# keep_original_details:flags.0?true stargift:InputSavedStarGift = Updates;</code></pre>
<p>A received gift can be upgraded to a collectible gift if the <a href="/constructor/messageActionStarGift">messageActionStarGift</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>can_upgrade</code> flag is set.</p>
<p>To obtain a preview of the possible <strong>attributes</strong> (chosen randomly) the gift can receive after the upgrade, invoke <a href="/method/payments.getStarGiftUpgradePreview">payments.getStarGiftUpgradePreview</a>.  </p>
<p>To upgrade a received gift, pay <a href="/constructor/starGift">starGift</a>.<code>upgrade_stars</code> <a href="/api/stars">Telegram Stars</a> from our balance by invoking <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a>, passing an <a href="/constructor/inputInvoiceStarGiftUpgrade">inputInvoiceStarGiftUpgrade</a> with the following parameters:</p>
<ul>
<li><code>stargift</code>: The identifier of the received gift</li>
<li><code>keep_original_details</code>: Set this flag to keep the original gift text, sender and receiver in the upgraded gift as a <a href="/constructor/starGiftAttributeOriginalDetails">starGiftAttributeOriginalDetails</a> attribute.</li>
</ul>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">usual payment flow &raquo;</a>.  </p>
<p>If the original sender of the gift has already paid for the upgrade <a href="#prepaying-for-someone-elses-upgrade">as specified here &raquo;</a> (signaled by specific flags listed <a href="#prepaying-for-someone-elses-upgrade">here &raquo;</a>), simply invoke <a href="/method/payments.upgradeStarGift">payments.upgradeStarGift</a> with the same flags instead of using the <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a> payment flow.  </p>
<p>Upgrading a gift will emit a <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>, containing info about the newly upgraded gift and some extra information.</p>
<h5><a class="anchor" name="prepaying-for-someone-else-39s-upgrade" href="#prepaying-for-someone-else-39s-upgrade"><i class="anchor-icon"></i></a>Prepaying for someone else&#39;s upgrade</h5>
<pre><code>messageActionStarGift#f24de7fa flags:# name_hidden:flags.0?true saved:flags.2?true converted:flags.3?true upgraded:flags.5?true refunded:flags.9?true can_upgrade:flags.10?true prepaid_upgrade:flags.13?true upgrade_separate:flags.16?true gift:StarGift message:flags.1?TextWithEntities convert_stars:flags.4?long upgrade_msg_id:flags.5?int upgrade_stars:flags.8?long from_id:flags.11?Peer peer:flags.12?Peer saved_id:flags.12?long prepaid_upgrade_hash:flags.14?string gift_msg_id:flags.15?int = MessageAction;

inputInvoiceStarGiftPrepaidUpgrade#9a0b48b8 peer:InputPeer hash:string = InputInvoice;

messageActionStarGiftUnique#34f762f3 flags:# upgrade:flags.0?true transferred:flags.1?true saved:flags.2?true refunded:flags.5?true prepaid_upgrade:flags.11?true gift:StarGift can_export_at:flags.3?int transfer_stars:flags.4?long from_id:flags.6?Peer peer:flags.7?Peer saved_id:flags.7?long resale_amount:flags.8?StarsAmount can_transfer_at:flags.9?int can_resell_at:flags.10?int = MessageAction;</code></pre>
<p>When sending a gift, the sender can pay for the upgrade by setting <a href="/constructor/inputInvoiceStarGift">inputInvoiceStarGift</a>.<code>include_upgrade</code> when buying the gift.<br>The resulting <a href="/constructor/messageActionStarGift">messageActionStarGift</a> will have the <code>prepaid_upgrade</code> flag set, and the associated <a href="/constructor/savedStarGift">savedStarGift</a> <strong>will</strong> have the <code>upgrade_stars</code> flag set and populated with the amount paid.  </p>
<p>It&#39;s also possible to pay to upgrade someone else&#39;s gift (even if we did not send them that gift) after the fact, by using <a href="/constructor/inputInvoiceStarGiftPrepaidUpgrade">inputInvoiceStarGiftPrepaidUpgrade</a>, passing the peer where the gift was sent and the upgrade hash from <a href="/constructor/messageActionStarGift">messageActionStarGift</a>.<code>prepaid_upgrade_hash</code> or <a href="/constructor/savedStarGift">savedStarGift</a>.<code>prepaid_upgrade_hash</code>.  </p>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">usual payment flow &raquo;</a>.  </p>
<p>Upon completion, a new <a href="/constructor/messageActionStarGift">messageActionStarGift</a> will be emitted with the <code>upgrade_separate</code> flag set, and the <code>gift_msg_id</code> flag populated with the ID of the <a href="/constructor/messageActionStarGift">messageActionStarGift</a> with the upgraded gift.   </p>
<h4><a class="anchor" name="sharing-and-getting-info-about-a-collectible-gift" href="#sharing-and-getting-info-about-a-collectible-gift"><i class="anchor-icon"></i></a>Sharing and getting info about a collectible gift</h4>
<pre><code>starGiftUnique#1befe865 flags:# require_premium:flags.6?true resale_ton_only:flags.7?true theme_available:flags.9?true id:long gift_id:long title:string slug:string num:int owner_id:flags.0?Peer owner_name:flags.1?string owner_address:flags.2?string attributes:Vector&lt;StarGiftAttribute&gt; availability_issued:int availability_total:int gift_address:flags.3?string resell_amount:flags.4?Vector&lt;StarsAmount&gt; released_by:flags.5?Peer value_amount:flags.8?long value_currency:flags.8?string theme_peer:flags.10?Peer = StarGift;

payments.uniqueStarGift#416c56e8 gift:StarGift chats:Vector&lt;Chat&gt; users:Vector&lt;User&gt; = payments.UniqueStarGift;

payments.uniqueStarGiftValueInfo#512fe446 flags:# last_sale_on_fragment:flags.1?true value_is_average:flags.6?true currency:string value:long initial_sale_date:int initial_sale_stars:long initial_sale_price:long last_sale_date:flags.0?int last_sale_price:flags.0?long floor_price:flags.2?long average_price:flags.3?long listed_count:flags.4?int fragment_listed_count:flags.5?int fragment_listed_url:flags.5?string = payments.UniqueStarGiftValueInfo;

---functions---

payments.getUniqueStarGift#a1974d72 slug:string = payments.UniqueStarGift;
payments.getUniqueStarGiftValueInfo#4365af6b slug:string = payments.UniqueStarGiftValueInfo;</code></pre>
<p>Info about a unique gift may be shared by creating a <a href="/api/links#collectible-gift-link">collectible gift link &raquo;</a> using the slug in <a href="/constructor/starGiftUnique">starGiftUnique</a>.<code>slug</code>.  </p>
<p>When parsing a received collectible gift link, invoke <a href="/method/payments.getUniqueStarGift">payments.getUniqueStarGift</a> to obtain info about the gift.  </p>
<p>The slug is also used when buying a gift currently on <a href="#reselling-collectible-gifts">resale &raquo;</a>.  </p>
<p>The slug of an <strong>owned</strong> collectible gift link may also be used in any place in the API where an <a href="/type/InputSavedStarGift">InputSavedStarGift</a> is accepted, passing an <a href="/constructor/inputSavedStarGiftSlug">inputSavedStarGiftSlug</a>.  </p>
<p><a href="/method/payments.getUniqueStarGiftValueInfo">payments.getUniqueStarGiftValueInfo</a> may also be used to obtain info about the value of a collectible gift.  </p>
<h4><a class="anchor" name="reselling-collectible-gifts" href="#reselling-collectible-gifts"><i class="anchor-icon"></i></a>Reselling collectible gifts</h4>
<pre><code>messageActionStarGiftUnique#34f762f3 flags:# upgrade:flags.0?true transferred:flags.1?true saved:flags.2?true refunded:flags.5?true prepaid_upgrade:flags.11?true gift:StarGift can_export_at:flags.3?int transfer_stars:flags.4?long from_id:flags.6?Peer peer:flags.7?Peer saved_id:flags.7?long resale_amount:flags.8?StarsAmount can_transfer_at:flags.9?int can_resell_at:flags.10?int = MessageAction;

inputSavedStarGiftUser#69279795 msg_id:int = InputSavedStarGift;
inputSavedStarGiftChat#f101aa7f peer:InputPeer saved_id:long = InputSavedStarGift;
inputSavedStarGiftSlug#2085c238 slug:string = InputSavedStarGift;

payments.resaleStarGifts#947a12df flags:# count:int gifts:Vector&lt;StarGift&gt; next_offset:flags.0?string attributes:flags.1?Vector&lt;StarGiftAttribute&gt; attributes_hash:flags.1?long chats:Vector&lt;Chat&gt; counters:flags.2?Vector&lt;StarGiftAttributeCounter&gt; users:Vector&lt;User&gt; = payments.ResaleStarGifts;

---functions---

payments.updateStarGiftPrice#edbe6ccb stargift:InputSavedStarGift resell_amount:StarsAmount = Updates;

payments.getResaleStarGifts#7a5fa236 flags:# sort_by_price:flags.1?true sort_by_num:flags.2?true attributes_hash:flags.0?long gift_id:long attributes:flags.3?Vector&lt;StarGiftAttributeId&gt; offset:string limit:int = payments.ResaleStarGifts;</code></pre>
<p>A <a href="#collectible-gifts">collectible gift we own &raquo;</a> can be put up for sale on the <a href="https://telegram.org/blog/gift-marketplace-and-more">gift marketplace &raquo;</a> by using <a href="/method/payments.updateStarGiftPrice">payments.updateStarGiftPrice</a>, specifying the price in <code>resell_stars</code>.  </p>
<p>Note that if the <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>can_resell_at</code> flag is set, the gift can be put up for sale only starting from the specified date.  </p>
<p>The minimum and maximum resale prices are specified in the <a href="/api/config#stars-stargift-resale-amount-min">stars_stargift_resale_amount_min &raquo;</a>/<a href="/api/config#stars-stargift-resale-amount-max">stars_stargift_resale_amount_max &raquo;</a> client configuration parameters; passing <code>0</code> will unlist the gift from the marketplace.<br>If someone buys the gift, you will get <code>price*</code><a href="/api/config#stars-stargift-resale-commission-permille">stars_stargift_resale_commission_permille &raquo;</a> <code>/1000</code> stars.  </p>
<p>When specifying the price in nanotons, the minimum and maximum resale prices are specified in the <a href="/api/config#ton-stargift-resale-amount-min">ton_stargift_resale_amount_min &raquo;</a>/<a href="/api/config#ton-stargift-resale-amount-max">ton_stargift_resale_amount_max &raquo;</a> client configuration parameters; passing <code>0</code> will unlist the gift from the marketplace.<br>If someone buys the gift, you will get <code>price*</code><a href="/api/config#ton-stargift-resale-commission-permille">ton_stargift_resale_commission_permille &raquo;</a> <code>/1000</code> nanoton.  </p>
<p>Use <a href="/method/payments.getStarGifts">payments.getStarGifts</a> to obtain the full list of of available <a href="/constructor/starGift">starGifts</a>; this method may return some sold-out gifts that have the <code>availability_resale</code> flag set, which indicates that some gifts of this type are on <a href="#reselling-collectible-gifts">resale &raquo;</a>, use <a href="/method/payments.getResaleStarGifts">payments.getResaleStarGifts</a> to fetch them.  </p>
<p>To buy a gift on resale, follow the usual <a href="#collectible-gifts">payment flow &raquo;</a>, passing an <a href="/constructor/inputInvoiceStarGiftResale">inputInvoiceStarGiftResale</a>.  </p>
<h4><a class="anchor" name="transferring-collectible-gifts" href="#transferring-collectible-gifts"><i class="anchor-icon"></i></a>Transferring collectible gifts</h4>
<pre><code>messageActionStarGiftUnique#34f762f3 flags:# upgrade:flags.0?true transferred:flags.1?true saved:flags.2?true refunded:flags.5?true prepaid_upgrade:flags.11?true gift:StarGift can_export_at:flags.3?int transfer_stars:flags.4?long from_id:flags.6?Peer peer:flags.7?Peer saved_id:flags.7?long resale_amount:flags.8?StarsAmount can_transfer_at:flags.9?int can_resell_at:flags.10?int = MessageAction;

starGiftUnique#1befe865 flags:# require_premium:flags.6?true resale_ton_only:flags.7?true theme_available:flags.9?true id:long gift_id:long title:string slug:string num:int owner_id:flags.0?Peer owner_name:flags.1?string owner_address:flags.2?string attributes:Vector&lt;StarGiftAttribute&gt; availability_issued:int availability_total:int gift_address:flags.3?string resell_amount:flags.4?Vector&lt;StarsAmount&gt; released_by:flags.5?Peer value_amount:flags.8?long value_currency:flags.8?string theme_peer:flags.10?Peer = StarGift;

inputSavedStarGiftUser#69279795 msg_id:int = InputSavedStarGift;
inputSavedStarGiftChat#f101aa7f peer:InputPeer saved_id:long = InputSavedStarGift;
inputSavedStarGiftSlug#2085c238 slug:string = InputSavedStarGift;

inputInvoiceStarGiftTransfer#4a5f5bd9 stargift:InputSavedStarGift to_id:InputPeer = InputInvoice;

---functions---

payments.transferStarGift#7f18176a stargift:InputSavedStarGift to_id:InputPeer = Updates;</code></pre>
<p>A collectible gift may be transferred to another user.</p>
<p>To transfer a collectible gift, pay <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>transfer_stars</code> <a href="/api/stars">Telegram Stars</a> from our balance by invoking <a href="/method/payments.getPaymentForm">payments.getPaymentForm</a>, passing an <a href="/constructor/inputInvoiceStarGiftTransfer">inputInvoiceStarGiftTransfer</a> with the following parameters:</p>
<ul>
<li><code>stargift</code>: The identifier of the received gift</li>
<li><code>to_id</code>: The destination peer</li>
</ul>
<p>Then, follow the <a href="/api/payments#22-getting-invoice-info-about-the-product">usual payment flow &raquo;</a>.  </p>
<p>If <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>transfer_stars</code> is not set, the gift may be transferred for free: in this case, simply invoke <a href="/method/payments.transferStarGift">payments.transferStarGift</a>.  </p>
<h4><a class="anchor" name="withdraw-a-collectible-gift-to-the-ton-blockchain" href="#withdraw-a-collectible-gift-to-the-ton-blockchain"><i class="anchor-icon"></i></a>Withdraw a collectible gift to the TON blockchain</h4>
<pre><code>messageActionStarGiftUnique#34f762f3 flags:# upgrade:flags.0?true transferred:flags.1?true saved:flags.2?true refunded:flags.5?true prepaid_upgrade:flags.11?true gift:StarGift can_export_at:flags.3?int transfer_stars:flags.4?long from_id:flags.6?Peer peer:flags.7?Peer saved_id:flags.7?long resale_amount:flags.8?StarsAmount can_transfer_at:flags.9?int can_resell_at:flags.10?int = MessageAction;

savedStarGift#19a9b572 flags:# name_hidden:flags.0?true unsaved:flags.5?true refunded:flags.9?true can_upgrade:flags.10?true pinned_to_top:flags.12?true upgrade_separate:flags.17?true from_id:flags.1?Peer date:int gift:StarGift message:flags.2?TextWithEntities msg_id:flags.3?int saved_id:flags.11?long convert_stars:flags.4?long upgrade_stars:flags.6?long can_export_at:flags.7?int transfer_stars:flags.8?long can_transfer_at:flags.13?int can_resell_at:flags.14?int collection_id:flags.15?Vector&lt;int&gt; prepaid_upgrade_hash:flags.16?string = SavedStarGift;

payments.starGiftWithdrawalUrl#84aa3a9c url:string = payments.StarGiftWithdrawalUrl;

---functions---

payments.getStarGiftWithdrawalUrl#d06e93a8 stargift:InputSavedStarGift password:InputCheckPasswordSRP = payments.StarGiftWithdrawalUrl;</code></pre>
<p>A collectible gift can be converted to an NFT on the TON blockchain by using <a href="/method/payments.getStarGiftWithdrawalUrl">payments.getStarGiftWithdrawalUrl</a>: the method requires the current user&#39;s 2FA password, passed as <a href="/api/srp">specified here &raquo;</a>, and it returns a URL that can be used to import the NFT on Fragment.</p>
<p>Note that if the <a href="/constructor/messageActionStarGiftUnique">messageActionStarGiftUnique</a>/<a href="/constructor/savedStarGift">savedStarGift</a>.<code>can_resell_at</code> flag is set, the gift can be put up for sale only starting from the specified date.  </p>
<h4><a class="anchor" name="setting-a-collectible-gift-as-emoji-status" href="#setting-a-collectible-gift-as-emoji-status"><i class="anchor-icon"></i></a>Setting a collectible gift as emoji status</h4>
<p><a href="/api/gifts#collectible-gifts">Owned collectible gifts &raquo;</a> may be set as emoji statuses: see <a href="/api/emoji-status#collectibles-as-emoji-statuses">here &raquo;</a> for more info on the full flow.</p>
<h4><a class="anchor" name="setting-a-collectible-gift-as-chat-theme" href="#setting-a-collectible-gift-as-chat-theme"><i class="anchor-icon"></i></a>Setting a collectible gift as chat theme</h4>
<p>Some <a href="/api/gifts#collectible-gifts">owned collectible gifts &raquo;</a> (those with the <a href="/constructor/starGiftUnique">starGiftUnique</a>.<code>theme_available</code> flag set) may be set as chat themes: see <a href="/api/themes#chat-themes">here &raquo;</a> for more info on the full flow.</p>
<h3><a class="anchor" name="toncoin" href="#toncoin"><i class="anchor-icon"></i></a>Toncoin</h3>
<pre><code>messageActionGiftTon#a8a3c699 flags:# currency:string amount:long crypto_currency:string crypto_amount:long transaction_id:flags.0?string = MessageAction;

inputStickerSetTonGifts#1cf671a0 = InputStickerSet;</code></pre>
<p>When TONs are gifted to the user, a <a href="/constructor/messageActionGiftTon">messageActionGiftTon</a> is received: this constructor, along with its contents, should be displayed next to the appropriate sticker from the <a href="/constructor/inputStickerSetTonGifts">inputStickerSetTonGifts &raquo;</a> <a href="/api/stickers#stickersets">stickerset &raquo;</a>:</p>
<ul>
<li>If <code>crypto_amount &lt;= 10_000_000_000</code>, choose the sticker with emoji equal to “<img class="emoji" src="//telegram.org/img/emoji/40/32E283A3.png" width="20" height="20" alt="2️⃣" />”</li>
<li>If <code>crypto_amount &lt;= 50_000_000_000</code>, choose the sticker with emoji equal to “<img class="emoji" src="//telegram.org/img/emoji/40/31E283A3.png" width="20" height="20" alt="1️⃣" />”</li>
<li>Otherwise, choose the sticker with emoji equal to “<img class="emoji" src="//telegram.org/img/emoji/40/33E283A3.png" width="20" height="20" alt="3️⃣" />” </li>
</ul>
</div>
  
</div>
          
        </div>
      </div>
      <div class="footer_wrap">
  <div class="footer_columns_wrap footer_desktop">
    <div class="footer_column footer_column_telegram">
      <h5>Telegram</h5>
      <div class="footer_telegram_description"></div>
      Telegram is a cloud-based mobile and desktop messaging app with a focus on security and speed.
    </div>

    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
      <ul>
        <li><a href="//telegram.org/faq">FAQ</a></li>
        <li><a href="//telegram.org/privacy">Privacy</a></li>
        <li><a href="//telegram.org/press">Press</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#mobile-apps">Mobile Apps</a></h5>
      <ul>
        <li><a href="//telegram.org/dl/ios">iPhone/iPad</a></li>
        <li><a href="//telegram.org/android">Android</a></li>
        <li><a href="//telegram.org/dl/web">Mobile Web</a></li>
      </ul>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/apps#desktop-apps">Desktop Apps</a></h5>
      <ul>
        <li><a href="//desktop.telegram.org/">PC/Mac/Linux</a></li>
        <li><a href="//macos.telegram.org/">macOS</a></li>
        <li><a href="//telegram.org/dl/web">Web-browser</a></li>
      </ul>
    </div>
    <div class="footer_column footer_column_platform">
      <h5><a href="//core.telegram.org/">Platform</a></h5>
      <ul>
        <li><a href="//core.telegram.org/api">API</a></li>
        <li><a href="//translations.telegram.org/">Translations</a></li>
        <li><a href="//instantview.telegram.org/">Instant View</a></li>
      </ul>
    </div>
  </div>
  <div class="footer_columns_wrap footer_mobile">
    <div class="footer_column">
      <h5><a href="//telegram.org/faq">About</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/blog">Blog</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/press">Press</a></h5>
    </div>
    <div class="footer_column">
      <h5><a href="//telegram.org/moderation">Moderation</a></h5>
    </div>
  </div>
</div>
    </div>
    <script src="/js/main.js?47"></script>
    <script src="/js/jquery.min.js?1"></script>
<script src="/js/bootstrap.min.js?1"></script>

    <script>window.initDevPageNav&&initDevPageNav();
backToTopInit("Go up");
removePreloadInit();
</script>
  </body>
</html>

