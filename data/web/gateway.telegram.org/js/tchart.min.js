window.Graph={render:function(t,C){var b=document.createElement("div");b.className="tchart--wrapper";t.appendChild(b);return new this.units.TChart({container:b,data:C})},units:{}};(function(){var t=function(b,a,c,d){return{linear:function(e,f,g,k){return g*e/k+f},easeInOutQuad:function(e,f,g,k){e/=.5*k;if(1>e)return.5*g*e*e+f;e--;return-g/2*(e*(e-2)-1)+f}}[d](c,b,a-b,1)},C=function(b){this.composer=b.composer;this.state=b.state;this.queue={};this.queueSize=0;this.step=this.step.bind(this)};C.prototype={add:function(b){for(var a=0,c=+new Date,d,e,f,g=this.queue;a<b.length;){e=b[a];d=g[e.prop];if(!d){if(e.end==e.state[e.prop]){e.cbEnd&&e.cbEnd(e.state);a++;continue}d={lastStart:1};g[e.prop]=d;this.queueSize++}f=c-d.lastStart;e.duration*=this.state.speed;e.delay*=this.state.speed;d.cbEnd=e.cbEnd;d.state=e.state;d.lastStart=c;d.start=e.state[e.prop];d.end=e.end;d.startDt=c+(e.delay||0);d.endDt=d.startDt+(e.duration||0)-(e.fixed?0:Math.max(e.duration-f,0));d.tween=e.tween||"easeInOutQuad";d.speed=e.speed;d.group=e.group;a++}this.animFrame||(this.animFrame=requestAnimationFrame(this.step))},get:function(b){return this.queue[b]},step:function(){var b=[],a=+new Date,c,d={top:!1,bottom:!1};for(c in this.queue){var e=this.queue[c];var f=a;var g=e.endDt-e.startDt;var k=e.state[c];var h=f<e.startDt;f<e.startDt?f=e.startDt:f>e.endDt&&(f=e.endDt);f=g?(f-e.startDt)/g:h?0:1;f=1>f?"exp"==e.tween?k+(e.end-k)*e.speed:t(e.start,e.end,f,e.tween):e.end;f!=k?(e.state[c]=f,d.top=d.top||e.group.top,d.bottom=d.bottom||e.group.bottom):f==e.end&&b.push(c)}for(a=0;a<b.length;)this.queue[b[a]].cbEnd&&this.queue[b[a]].cbEnd(this.queue[b[a]].state),delete this.queue[b[a]],a++;this.queueSize-=b.length;this.composer.render(d);this.queueSize?this.animFrame=requestAnimationFrame(this.step):delete this.animFrame}};window.Graph.units.TAnimator=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;b.additional.mini&&(this.$canvas=document.createElement("canvas"),this.ctx=this.$canvas.getContext("2d",{alpha:!0}))};C.prototype={onResize:function(){if(this.opts.additional.mini){var b=this.opts.settings.dpi,a=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph;this.$canvas.width=a.w*b;this.$canvas.height=a.h*b;this.cached=""}},setDarkMode:function(b){this.isDarkMode=b},render:function(){var b,a,c=this.opts,d=c.data.ys,e=c.state,f=c.additional.mini,g=f?e.xg1:e.x1,k=f?e.xg2:e.x2,h=c.settings,m=h["PADD"+(f?"_MINI_AREA":"")][0],x=h["PADD"+(f?"_MINI_AREA":"")][1],r=h["PADD"+(f?"_MINI_AREA":"")][2],p=h["PADD"+(f?"_MINI_AREA":"")][3],n=c.data.x,q=c.settings.dpi,l=f?this.ctx:this.opts.ctx,w=[],A=[],D=f?e.dims.mini:e.dims.graph,B=void 0==e.zoomMorph?0:e.zoomMorph,E=B,G=d.length;if(f){var I=[D.w,D.h,e.xg1,e.xg2,this.isDarkMode,e.zoomMode,B];for(b=0;b<G;b++)I.push(e["om_"+b]),I.push(e["f_"+b]);I=I.join(",");if(I==this.cached){this.opts.ctx.drawImage(this.$canvas,D.l*q,D.t*q);return}this.cached=I}var z=(D.w-x-p)/(k-g);var u=Math.floor(t.TUtils.getXIndex(n,g-p/z));var y=Math.ceil(t.TUtils.getXIndex(n,k+x/z));z*=q;var F=(p+(f?0:D.l))*q-g*z;hBottom=(D.h-r+(f?0:D.t))*q;var Q=[],T=[],P=0,N=0,R=0,O=!1;for(b=0;b<G;b++){var H=f?e["om_"+b]:e["o_"+b];O=O||1>e["f_"+b];1>H&&0<H&&(P=H);0<H&&(Q.push(b),T.push(H),1==H&&e["e_"+b]&&(N++,R=Q.length-1))}var W=Q.length;P=1==N?P:1;var Z=t.TUtils.simplifyData("line",n,d,z,F,Q,u,y,D.w-x-p);u=Z.xInd1;y=Z.xInd2;var J=Z.x,ka=Z.ys,la=!1;for(a=u;a<=y;a++){w[a]=0;for(b=A[a]=0;b<W;b++)A[a]+=(ka[Q[b]].y[a]||0)*T[b];0==A[a]&&(la=!0)}if(la||O)l.fillStyle=this.isDarkMode?"#242f3e":"#fff",l.fillRect(0,0,D.w*q,D.h*q);if(0<B&&!f){1==E&&(this.savedX1=g,this.savedX2=k);if(1>E){var Qa=this.opts.animator.get("x1"),Ra=this.opts.animator.get("x2");x1End=Qa?Qa.end:this.opts.state.x1;x2End=Ra?Ra.end:this.opts.state.x2;var Aa=t.TUtils.getXIndex(n,-1==this.opts.state.zoomDir?this.savedX1:x1End,!0),ua=t.TUtils.getXIndex(n,-1==this.opts.state.zoomDir?this.savedX2:x2End,!0)}else Aa=t.TUtils.getXIndex(n,g,!0),ua=t.TUtils.getXIndex(n,k,!0);ua--;var eb=Math.floor(Aa),Sa=Math.ceil(Aa),Ta=Math.floor(ua),fb=Math.ceil(ua),Ba=0,aa=[];for(b=0;b<W;b++){aa[b]=0;var Ha=d[Q[b]].y;for(a=Sa;a<=Ta;a++){var ha=(Ha[a]||0)*T[b];aa[b]+=ha;Ba+=ha}ha=(Sa-Aa)*(Ha[eb]||0)*T[b];aa[b]+=ha;Ba+=ha;ha=(ua-Ta)*(Ha[fb]||0)*T[b];aa[b]+=ha;Ba+=ha}var Ua=1==this.opts.state.zoomDir?Math.pow(Math.min(Math.max(.85>E?(E-.65)/.2:1-(E-.9)/.15,0),1),.8):this.prevElastic,va=2*Math.PI-Math.PI/(7-E)-Math.PI/8*Ua,gb=va;1==this.opts.state.zoomDir?(E=Math.min(Math.max((E-.25)/.4,0),1),this.prevElastic=Ua):E=Math.min(Math.max(2.4*E-1.4,0),1);var L=[],X=h.PIE_RADIUS*(1>B?2.31:1)*q,S=q*(D.w/2+D.l),ma=q*(D.h/2+D.t+2),Va=2*Math.PI*X/q,hb=1/13;for(b=0;b<W;b++){var ba=aa[b]/Ba;ba=ba||0;var Wa=2*Math.PI*ba,Ia=va-Wa,ib=Math.round(ba*Va*hb);b==W-1&&(Ia=gb-2*Math.PI);var Ja=.2*Math.PI/Va,Ka=d[Q[b]];L.push({st:va+Ja,ed:Ia-Ja,mid:va-Wa/2-Ja/2,additionalPoints:Math.max(ib,4),percentage:0==ba?0:Math.max(Math.round(100*ba),1),percentageText:0==ba?"":.01>ba?"\x3c1%":Math.round(100*ba)+"%",ind:Q[b],value:aa[b],label:Ka.label,color:this.isDarkMode?Ka.colors_n[2]:Ka.colors_d[2]});va=Ia}e.pieAngles=L}var na=q*(D.h-m-r+(f?0:-4));var wa=(D.h-r+(f?0:D.t))*q;var K=0;for(b=0;b<G;b++)if(H=f?e["om_"+b]:e["o_"+b],0<H){var xa=ka[b].y;var ya=H*na;l.fillStyle=this.isDarkMode?d[b].colors_n[0]:d[b].colors_d[0];l.globalAlpha=.9*e["f_"+b]+.1;l.beginPath();if(0!=B&&f){var Xa=this.opts.data.mainPeriodLen*z;l.moveTo(J[y]*z+Xa+F,hBottom-w[y]);if(0<b)for(l.lineTo(J[y]*z+F,hBottom-w[y]),a=y;a>=u+1;a--)l.lineTo(J[a]*z+F,hBottom-(w[a]+E*(w[a-1]-w[a]))),l.lineTo(J[a-1]*z+F,hBottom-w[a-1]);else l.lineTo(J[u]*z+F,hBottom);if(K<W-1)for(a=u;a<=y-1;a++){ca=wa-(xa[a]*ya/A[a]||0);V=hBottom-ca;a==u&&l.lineTo(J[u]*z+F,hBottom-w[u]-V);ca=wa-(xa[a+1]*ya/A[a+1]||0);var La=hBottom-ca,Ma=w[a+1]+La;l.lineTo(J[a+1]*z+F,hBottom-(Ma+E*(w[a]+V-Ma)));l.lineTo(J[a+1]*z+F,hBottom-Ma);a==y-1&&l.lineTo(J[y]*z+Xa+F,hBottom-w[y]-La);w[a]+=V}else l.lineTo(J[u]*z+F<<0,hBottom-na<<0),l.lineTo(J[y]*z+F<<0,hBottom-na<<0);w[y]+=La}else if(0==B){if(0<b)for(l.moveTo(J[y]*z+F<<0,hBottom-w[y]<<0),a=y-1;a>=u;a--)l.lineTo(J[a]*z+F<<0,hBottom-w[a]<<0);else l.moveTo(J[y]*z+F<<0,hBottom<<0),l.lineTo(J[u]*z+F<<0,hBottom<<0);if(K<W-1||la)for(a=u;a<=y;a++){var ca=wa-(xa[a]*ya/A[a]||0),V=hBottom-ca,ia=w[a]+V;ia>na&&(ia=na);l.lineTo(J[a]*z+F<<0,hBottom-ia<<0);w[a]+=V}else l.lineTo(J[u]*z+F<<0,hBottom-na<<0),l.lineTo(J[y]*z+F<<0,hBottom-na<<0)}else{var Y=function(pa,Na,ja,qa){var Ya=0,Za=0;da&&1<N&&(Ya=Math.cos(L[K].mid)*da*8*q,Za=-Math.sin(L[K].mid)*da*8*q);qa>X&&(qa=X);var oa=Math.atan2(ma-Na,pa-S);oa=0>oa?2*Math.PI+oa:oa;pa=Math.pow((ma-Na)*(ma-Na)+(pa-S)*(pa-S),.5);Math.abs(ja-oa)>Math.PI*(1==W?1.5:1)&&(ja-=2*Math.PI);ja<2*-Math.PI&&(ja-=2*-Math.PI);ja=oa+E*(ja-oa);qa=pa+E*(qa-pa);return[S+Math.cos(ja)*qa+Ya,ma-Math.sin(ja)*qa+Za]},ra=1>B?4:L[K].additionalPoints,Oa=!1,Ca=!1,da=e["pieInd_"+Q[K]]||0;0==L[K].percentage&&(l.globalAlpha=0);var M=Y(J[y]*z+F,hBottom-w[y],L[0].st,X);l.moveTo(M[0],M[1]);if(0<K)for(a=y-1;a>=u;a--){var U=J[a]*z+F;U==S&&(Oa=!0);if(U>=S){var ea=(U-S)/(D.w*q/2);0==E&&(ea=0);M=Y(U,hBottom-w[a],L[0].st,X*ea)}else{if(!Oa){Oa=!0;var Pa=(S-U)/(J[a+1]*z+F-U),fa=hBottom-w[a],za=hBottom-w[a+1];M=Y(S,fa+Pa*(za-fa),L[K].st,0);l.lineTo(M[0],M[1])}ea=(S-U)/(D.w*q/2);M=Y(U,hBottom-w[a],L[K].st,X*ea)}l.lineTo(M[0],M[1])}else M=Y(J[u]*z+F,hBottom,L[0].st,X),l.lineTo(M[0],M[1]);if(K<W-1){for(a=0;a<=ra;a++)ca=wa-(xa[u]*ya/A[u]||0),V=hBottom-ca,fa=hBottom-w[u],za=hBottom-w[u]-V,M=Y(J[u]*z+F,fa+a/ra*(za-fa),L[K].st+a/ra*(L[K].ed-L[K].st),X),l.lineTo(M[0],M[1]);for(a=u;a<=y;a++){ca=wa-(xa[a]*ya/A[a]||0);V=hBottom-ca;U=J[a]*z+F;U==S&&(Ca=!0);if(U<=S){ea=(S-U)/(D.w*q/2);var $a=U,ab=hBottom-w[a]-V;M=Y(U,ab,L[K].ed,X*ea)}else Ca||(Ca=!0,Pa=(S-$a)/(U-$a),fa=ab,za=hBottom-w[a]-V,M=Y(S,fa+Pa*(za-fa),L[K].ed,0),l.lineTo(M[0],M[1])),ea=(U-S)/(D.w*q/2),0==E&&(ea=0),M=Y(U,hBottom-w[a]-V,L[0].st,X*ea);l.lineTo(M[0],M[1]);w[a]+=V}U<S&&!Ca&&(M=Y(S,fa,L[K].ed,0),l.lineTo(M[0],M[1]))}else for(a=0;a<=ra;a++)M=Y((J[u]+a/ra*(J[y]-J[u]))*z+F,0,L[K].st+a/ra*(L[0].st-2*Math.PI-L[K].st),X),l.lineTo(M[0],M[1])}l.closePath();l.fill();if(!f&&0<B&&L[K].percentageText){var bb=Math.pow(E,1==this.opts.state.zoomDir?4:20)*H*(.9*e["f_"+b]+.1),sa=Math.max(Math.min(2*L[K].percentage,26),10),ta=h.PIE_RADIUS,Da=2*ta/3,Ea=Math.cos(L[K].mid),Fa=Math.sin(L[K].mid),cb=L[K].percentage<c.data.pieLabelsPercentages.outboard,Ga=0;ia=0;da&&1<N&&(Ga=Ea*da*8*q,ia=-Fa*da*8*q);l.fillStyle="white";l.textAlign="center";l.globalAlpha=bb;L[K].percentage<c.data.pieLabelsPercentages.hoverOnly&&(l.globalAlpha=da*bb);if(cb){sa=Math.max(sa,14);Da=ta+sa/3+13;l.fillStyle=this.isDarkMode?d[b].colors_n[0]:d[b].colors_d[0];l.lineWidth=1;l.strokeStyle=this.isDarkMode?d[b].colors_n[0]:d[b].colors_d[0];var jb=S+Ga+Ea*(ta-1)*q,kb=ma+ia-Fa*(ta-1)*q,lb=S+Ga+Ea*(ta+6*(1-da)-1)*q,mb=ma+ia-Fa*(ta+6*(1-da)-1)*q;l.beginPath();l.moveTo(jb,kb);l.lineTo(lb,mb);l.stroke()}var db=Ea*Da*(R==K?P:1),nb=S+Ga+db*q+(cb?sa/4*L[K].percentageText.length*db/Da*q:0),ob=ma+ia-Fa*Da*(R==K?P:1)*q;l.font="bold "+sa*q+"px "+c.settings.FONTS;l.fillText(L[K].percentageText,nb,ob+sa*q/2.9);l.globalAlpha=1}K++}l.globalAlpha=1;f&&this.opts.ctx.drawImage(this.$canvas,D.l*q,D.t*q)}};t.TAreas=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;this.ctx=b.ctx;this.items={};this.setAnimation(!1);this.deleteItem=this.deleteItem.bind(this)};C.prototype={onResize:function(){this.setAnimation(!1)},setDarkMode:function(b){this.isDarkMode=b},setAnimation:function(b){this.noAnimation=!b},hideItem:function(b,a){this.items[b].tp=2;this.opts.animator.add([{prop:"ox_"+b,state:this.items[b].state,end:0,duration:this.noAnimation?0:200*a,tween:"linear",group:{top:!0},cbEnd:this.deleteItem}])},deleteItem:function(b){delete this.items[b.ind]},render:function(b){var a=this.opts,c=a.settings.dpi,d=a.data.x,e=a.state,f=a.settings.PADD[1],g=a.settings.PADD[3],k=a.animator,h=this.opts.state.dims.axisX,m=this.opts.state.dims.dates,x=e.zoomMode,r=void 0==e.zoomMorph?0:e.zoomMorph,p=Math.floor(t.TUtils.getXIndex(d,e.x1)),n=Math.ceil(t.TUtils.getXIndex(d,e.x2)),q=p,l=n,w="bar"==a.graphStyle||"step"==a.graphStyle,A=9*(e.zoomMode&&a.data.details?a.data.details.maxXTickLength:a.data.maxXTickLength),D=w?this.opts.data.mainPeriodLen:0,B=w?this.opts.data.detailPeriodLen:0,E=D+(B-D)*r,G=(h.w-f-g)/Math.round((e.x2-e.x1+D)/this.opts.data.mainPeriodLen),I=(h.w-f-g)/Math.round((e.x2-e.x1+B)/this.opts.data.detailPeriodLen),z=G+(I-G)*r;B=Math.pow(2,Math.ceil(Math.log2(A/G)));I=Math.pow(2,Math.ceil(Math.log2(A/I)));D=(h.w-g-f)/(e.x2-e.x1+D*(1-r));1>B&&(B=1);1>I&&(I=1);this.ctx.font=11*c+"px "+a.settings.FONTS;this.ctx.textAlign="center";this.ctx.fillStyle=this.isDarkMode?this.opts.data.axis_n.x:this.opts.data.axis_d.x;var u=1/Math.pow(this.prevXStep?this.prevXStep>G?this.prevXStep/G:G/this.prevXStep:1,5);x&&1==r&&(u/=2);this.prevXStep=G;p=Math.max(p-Math.ceil((g+.5*A)/z),0);n=Math.min(n+Math.ceil((f+.5*A)/z),d.length-1);x&&(q=this.opts.animator.get("x1"),l=this.opts.animator.get("x2"),q=q?q.end:this.opts.state.x1,l=l?l.end:this.opts.state.x2,q=Math.floor(t.TUtils.getXIndex(d,q)),l=Math.floor(t.TUtils.getXIndex(d,l)));if(x)var y=Math.round((Math.min(d[this.opts.state.detailInd2],this.opts.state.xMainMax)-Math.max(d[this.opts.state.detailInd1],this.opts.state.xMainMin))/this.opts.data.mainPeriodLen)+(w?0:1);for(;p<=n;p++)w=0==p%B,G="m",x&&(p<this.opts.state.detailInd1?w=0==p%B&&1>r:p<=this.opts.state.detailInd2?(w=0==Math.max(p-this.opts.state.detailInd1,0)%I,G="d"):w=0==Math.max(p-(this.opts.state.detailInd2-this.opts.state.detailInd1+1-y),0)%B&&1>r),G=d[p]+G,z=this.items[G],w?z?2==z.tp&&(z.tp=1,k.add([{prop:"ox_"+G,state:z.state,end:1,duration:this.noAnimation?0:200*u,tween:"linear",group:{top:!0}}])):(z={tp:1,xi:d[p],i:p,state:{ind:G}},z.state["ox_"+G]=0,this.items[G]=z,k.add([{prop:"ox_"+G,state:z.state,end:1,duration:this.noAnimation?0:200*u,tween:"linear",group:{top:!0}}])):z&&1==z.tp&&this.hideItem(G,u),z&&0<z.state["ox_"+G]&&(w=(z.xi-e.x1+E/2)*D+g,this.ctx.globalAlpha=z.state["ox_"+G]*b,w+A/2>=h.l&&w-A/2<=h.l+h.w&&this.ctx.fillText(a.data.datesShort[p],(w+h.l)*c,(h.t+9)*c));for(p in this.items)z=this.items[p],1==z.tp&&(z.xi<e.x1-g/D||z.xi>e.x2+f/D)&&this.hideItem(p,u);this.ctx.globalAlpha=1;x&&1==r&&l--;l<q&&(l=q);b=a.data.datesRange[q]==a.data.datesRange[l]?a.data.datesRange[q]:a.data.datesRange[q]+" \u2013 "+a.data.datesRange[l];d=13;375>h.w&&(d=11);this.ctx.font="bold "+d*c+"px "+a.settings.FONTS;this.ctx.textAlign="right";this.ctx.fillStyle=this.isDarkMode?"#fff":"#000";this.ctx.fillText(b,(m.l+m.w)*c,(m.t+m.h-7)*c)}};t.TAxisX=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;this.ctx=b.ctx;this.uuid=1;this.items={};this.setAnimation(!1);this.setForceUpdate(!1);this.deleteItem=this.deleteItem.bind(this)};C.prototype={onResize:function(){this.setAnimation(!1);this.setForceUpdate(!1)},setDarkMode:function(b){this.isDarkMode=b},setAnimation:function(b){this.noAnimation=!b},setForceUpdate:function(b){this.forceUpdate=b},deleteItem:function(b){delete this.items[b.id]},render:function(b){if(this.opts.pairY){var a=this.calcAxisData("y1_0","y2_0");var c=this.calcAxisData("y1_1","y2_1");c.needAnimation&&!a.needAnimation||1>this.opts.state.o_0?this.updateAxisState("y1_1","y2_1","numRight",c,a,c):this.updateAxisState("y1_0","y2_0","numLeft",a,a,c)}else a=this.calcAxisData("y1","y2"),this.updateAxisState("y1","y2","numLeft",a,a,a);this.renderState(b)},calcAxisData:function(b,a){var c=this.opts.state,d=this.opts.settings.PADD[0],e=this.opts.settings.PADD[2],f=!1,g=this.opts.animator.get(b),k=this.opts.animator.get(a);g=g?g.end:c[b];k=k?k.end:c[a];var h=Math.round((k-g)/this.opts.settings.Y_AXIS_RANGE),m=c[a]>k?c[a]/k:k/c[a];a=(this.opts.state.dims.axisYLines.h-d-e)/(c[a]-c[b]);d=(this.opts.state.dims.axisYLines.h-d-e)/(k-g);if(1.05<(c[b]>g?c[b]/g:g/c[b])||1.05<m||this.forceUpdate)f=!0;f=this.items[0]&&f&&!this.noAnimation&&!this.animationInProgress;return{needAnimation:f,y1:g,y2:k,yRealStep:h,yRealStart:g,yScaleCur:a,yScaleEnd:d}},updateAxisState:function(b,a,c,d,e,f){a=this.opts;var g=a.state,k=a.settings.PADD[2],h=a.animator,m=Math.floor(a.settings.Y_AXIS_RANGE),x=!1,r=this.opts.state.dims.axisYLines;d.needAnimation&&(this.animationInProgress=!0);for(var p=0;p<=m;p++){var n=d.yRealStart+Math.round(d.yRealStep*p);var q=e.yRealStart+Math.round(e.yRealStep*p),l=f.yRealStart+Math.round(f.yRealStep*p),w=t.TUtils.getFormatter("yTickFormatter",a.data,g.zoomMorph),A=w(q,e.yRealStep);w=w(Math.max(l,0),f.yRealStep,!0);if(d.needAnimation){var D=r.t+r.h-k-(n-d.y1)*d.yScaleEnd,B=r.t+r.h-k-(this.items[p][c]-d.y1)*d.yScaleEnd,E=r.t+r.h-k-(n-g[b])*d.yScaleCur,G=r.t+r.h-k-(n-d.y1)*d.yScaleEnd;1>Math.abs(B-G)?this.items[p]={numLeft:q,strLeft:A,numRight:l,strRight:w,y:G}:(x=!0,this.uuid++,n={animated:!0,strLeft:this.items[p].strLeft,strRight:this.items[p].strRight,oProp:"oyt_"+this.uuid,yProp:"yyt_"+this.uuid,state:{id:"t_"+this.uuid}},n.state[n.oProp]=1,n.state[n.yProp]=D,this.items[n.state.id]=n,h.add([{prop:n.oProp,state:n.state,end:0,duration:this.noAnimation?0:200,tween:"linear",group:{top:!0}},{prop:n.yProp,state:n.state,end:B,duration:this.noAnimation?0:this.forceUpdate?333:500,fixed:!this.forceUpdate,tween:this.forceUpdate?null:"exp",speed:.18,group:{top:!0},cbEnd:this.deleteItem}]),delete this.items[p],this.uuid++,n={animated:!0,strLeft:A,strRight:w,oProp:"oy_"+p,yProp:"yy_"+p,state:{id:p,numLeft:q,strLeft:A,numRight:l,strRight:w}},n.state[n.oProp]=0,n.state[n.yProp]=E,this.items[n.state.id]=n,h.add([{prop:n.oProp,state:n.state,end:1,duration:this.noAnimation?0:200,tween:"linear",group:{top:!0}},{prop:n.yProp,state:n.state,end:G,duration:this.noAnimation?0:this.forceUpdate?333:500,fixed:!this.forceUpdate,tween:this.forceUpdate?null:"exp",speed:.18,group:{top:!0},cbEnd:function(I){this.items[I.id]={numLeft:I.numLeft,strLeft:I.strLeft,numRight:I.numRight,strRight:I.strRight,y:I["yy_"+I.id]};clearTimeout(this.animationEndTimeout);this.animationEndTimeout=setTimeout(function(){this.animationInProgress=!1}.bind(this),30)}.bind(this)}]))}else this.items[p]&&this.items[p].animated?(this.items[p].numLeft=q,this.items[p].strLeft=A,this.items[p].numRight=l,this.items[p].strRight=w,this.items[p].state.numLeft=q,this.items[p].state.strLeft=A,this.items[p].state.numRight=l,this.items[p].state.strRight=w):this.items[p]={numLeft:q,strLeft:A,numRight:l,strRight:w,y:r.t+r.h-k-(n-d.y1)*d.yScaleEnd}}d.needAnimation&&!x&&(this.animationInProgress=!1);this.forceUpdate=!1},renderState:function(b){var a=this.opts.settings.dpi,c,d=this.opts.state.dims.axisYLeft,e=this.opts.state.dims.axisYRight,f=this.opts.state.dims.axisYLines,g=this.opts.data.ys;this.ctx.font=11*a+"px "+this.opts.settings.FONTS;this.ctx.strokeStyle=this.isDarkMode?"rgba(255, 255, 255, 0.1)":"rgba(24, 45, 59, 0.1)";this.ctx.lineWidth=1*a;this.ctx.lineCap="square";this.ctx.lineJoin="square";for(c in this.items){var k=this.items[c];if(k.animated){var h=k.state[k.yProp];var m=k.state[k.oProp]}else h=k.y,m=1;0<=h-6&&h-16<=d.h&&(this.ctx.globalAlpha=m*(this.opts.pairY?this.opts.state.o_0:1)*b,this.ctx.textAlign="left",this.ctx.fillStyle=this.opts.pairY?this.isDarkMode?g[0].colors_n[1]:g[0].colors_d[1]:this.isDarkMode?this.opts.data.axis_n.y:this.opts.data.axis_d.y,this.ctx.fillText(k.strLeft,d.l*a,(h-7)*a),this.opts.pairY&&(this.ctx.globalAlpha=m*this.opts.state.o_1*b,this.ctx.textAlign="right",this.ctx.fillStyle=this.isDarkMode?g[1].colors_n[1]:g[1].colors_d[1],this.ctx.fillText(k.strRight,(e.l+e.w)*a,(h-7)*a)));h=(h<<0)-.5;0<=h&&h<=d.h&&(this.ctx.beginPath(),this.ctx.globalAlpha=m*b,this.ctx.moveTo(f.l*a,h*a),this.ctx.lineTo((f.l+f.w)*a,h*a),this.ctx.stroke())}this.ctx.globalAlpha=1}};t.TAxisY=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;this.filteredX1=[];this.filteredX2=[];this.filteredJ=[];this.prevY=[];this.$canvas=document.createElement("canvas");this.ctx=this.$canvas.getContext("2d",{alpha:!1})};C.prototype={onResize:function(){var b=this.opts.settings.dpi,a=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph;this.$canvas.width=a.w*b;this.$canvas.height=a.h*b;this.cached=""},setDarkMode:function(b){this.isDarkMode=b},render:function(){var b,a;var c=this.opts;var d=c.data.ys,e=c.state,f=c.additional.mini;var g=f?e.xg1:e.x1;var k=f?e.xg2:e.x2;var h=c.settings,m=h["PADD"+(f?"_MINI_BAR":"")][0],x=h["PADD"+(f?"_MINI_BAR":"")][1],r=h["PADD"+(f?"_MINI_BAR":"")][2],p=h["PADD"+(f?"_MINI_BAR":"")][3];h=c.data.x;var n=c.settings.dpi,q=this.ctx,l=f?e.dims.mini:e.dims.graph,w=e.zoomMode,A=e.detailInd1,D=e.detailInd2,B=void 0==e.zoomMorph?0:e.zoomMorph,E=this.filteredX1,G=this.filteredX2,I=this.filteredJ,z=this.prevY,u=d.length,y=[l.w,l.h,f?e.xg1:e.x1,f?e.xg2:e.x2,this.isDarkMode,w];f||(y.push(e.y1),y.push(e.y2));for(b=0;b<u;b++)y.push(f?e["om_"+b]:e["o_"+b]),y.push(e["f_"+b]);y=y.join(",");if(y==this.cached&&(this.opts.ctx.drawImage(this.$canvas,l.l*n,l.t*n),f))return;c=(l.w-x-p)/(k-g+this.opts.data.mainPeriodLen*(1-B));var F=Math.floor(t.TUtils.getXIndex(h,g-p/c));x=Math.ceil(t.TUtils.getXIndex(h,k+x/c));w&&1==B&&(F<this.opts.state.xg1Ind&&(F=this.opts.state.xg1Ind),x>this.opts.state.xg2Ind&&(x=this.opts.state.xg2Ind-1));c*=n;g=p*n-g*c;k=(l.h-r)*n;p=this.opts.data.mainPeriodLen*c;var Q=this.opts.data.detailPeriodLen*c;if(y!=this.cached){q.fillStyle=this.isDarkMode?"#242f3e":"#fff";q.fillRect(0,0,l.w*n,l.h*n);var T=0;for(a=F;a<=x;a++){var P=w?a>=A&&a<=D?Q:p:p;b=Math.round(h[a]*c+g);var N=Math.round(h[a]*c+g+P);0<N-b&&(E[T]=b,G[T]=N,I[T]=a,z[T]=0,T++)}for(b=0;b<u;b++)if(a=f?e["om_"+b]:e["o_"+b],0<a){N=d[b].y;P=d[b].yFrom;var R=f?e.y1m:e.y1;var O=f?e.y2m:e.y2;O=n*(l.h-m-r)/(O-R);R=(l.h-r)*n+R*O;O*=a;q.fillStyle=this.isDarkMode?d[b].colors_n[0]:d[b].colors_d[0];q.globalAlpha=.9*e["f_"+b]+.1;q.beginPath();q.moveTo(Math.round(h[x]*c+g+(1==B?Q:p)),Math.round(k));if(0<b)for(a=T-1;0<=a;a--){var H=k-z[a];q.lineTo(G[a],Math.round(H));q.lineTo(E[a],Math.round(H))}else q.lineTo(Math.round(h[F]*c+g),Math.round(k));for(a=0;a<T;a++)H=I[a],H=(H=w?H>=A&&H<=D?P[H]+B*(N[H]-P[H]):N[H]+B*(N[A]-N[H]):N[H])||0,H=R-H*O,z[a]+=k-H,q.lineTo(E[a],Math.round(k-z[a])),q.lineTo(G[a],Math.round(k-z[a]));q.closePath();q.fill()}q.globalAlpha=1;this.opts.ctx.drawImage(this.$canvas,l.l*n,l.t*n)}if(-1<e.barInd&&!f){this.opts.ctx.fillStyle=this.isDarkMode?"rgba(36, 47, 62, 0.5)":"rgba(255, 255, 255, 0.5)";this.opts.ctx.globalAlpha=e.barO;this.opts.ctx.fillRect(0,0,l.w*n,l.h*n);for(b=f=0;b<u;b++)a=e["o_"+b],0<a&&(N=d[b].y,P=d[b].yFrom,R=e.y1,O=e.y2,O=n*(l.h-m-r)/(O-R),R=(l.h-r)*n+R*O,O*=a,this.opts.ctx.fillStyle=this.isDarkMode?d[b].colors_n[0]:d[b].colors_d[0],this.opts.ctx.globalAlpha=.9*e["f_"+b]+.1,w?e.barInd>=A&&e.barInd<=D?(H=P[e.barInd]+B*(N[e.barInd]-P[e.barInd]),P=Q):(P=p,H=N[e.barInd]+B*(N[A]-N[e.barInd])):(H=N[e.barInd],P=p),H=H||0,F=k-(R-H*O)+f,this.opts.ctx.fillRect(Math.round(h[e.barInd]*c+g),Math.round(k-f+l.t*n),Math.max(Math.round(P),1),Math.round(f)-Math.round(F)),f=F);q.globalAlpha=1}this.cached=y}};t.TBars=C})();(function(){var t=window.Graph.units,C=function(b){this.state={};this.state.masterVisibility=1;this.state.slaveVisibility=0;this.specialZoomTransition=void 0;this.darkMode=!!document.documentElement.classList.contains("dark");var a=11>(!!window.ActiveXObject&&+/msie\s(\d+)/i.exec(navigator.userAgent)[1]||NaN),c=-1!=navigator.userAgent.indexOf("Trident/")&&(-1!=navigator.userAgent.indexOf("rv:")||-1!=navigator.appName.indexOf("Netscape"));this.settings={isIE:a||c,isEdge:/Edge\/\d./i.test(navigator.userAgent),dpi:Math.min(window.devicePixelRatio||1,2),Y_AXIS_RANGE:5.3,PADD:[20,16,20,16],PADD_MINI:[2,0,2,0],PADD_MINI_BAR:[0,0,0,0],PADD_MINI_AREA:[0,0,0,0],Y_LABELS_WIDTH:50,X_LABELS_HEIGHT:12,DATES_HEIGHT:18,DATES_WIDTH:300,MINI_GRAPH_HEIGHT:40,MINI_GRAPH_TOP:14,MINI_GRAPH_BOTTOM:2,FADE_HEIGHT:16,PIE_RADIUS:130,FONTS:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif'};this.data={caption:b.data.title,detailsFunc:b.data.x_on_zoom,hasDetail:!!b.data.x_on_zoom,slave:b.slave,yTickFormatter:b.data.yTickFormatter,yTooltipFormatter:b.data.yTooltipFormatter,yCustomTooltipFormatters:b.data.yCustomTooltipFormatters,yMinStep:b.data.yMinStep,xTickFormatter:b.data.xTickFormatter,xTooltipFormatter:b.data.xTooltipFormatter,xRangeFormatter:b.data.xRangeFormatter,strokeWidth:b.data.strokeWidth||"auto",hidden:b.data.hidden||[],tooltipOnHover:!!b.data.tooltipOnHover,forceLegend:b.data.forceLegend,sideLegend:b.data.sideLegend||!1,pieZoomRange:b.data.pieZoomRange||6048E5,pieLabelsPercentages:{outboard:b.data.pieLabelsPercentages&&void 0!=b.data.pieLabelsPercentages.outboard?b.data.pieLabelsPercentages.outboard:5,hoverOnly:b.data.pieLabelsPercentages&&void 0!=b.data.pieLabelsPercentages.hoverOnly?b.data.pieLabelsPercentages.hoverOnly:2},subchart:{show:b.data.subchart&&void 0!=b.data.subchart.show?b.data.subchart.show:!0,defaultZoom:b.data.subchart&&b.data.subchart.defaultZoom}};b.data.y_scaled&&(this.pairY=!0);this.graphStyle="line";a=this.settings;b.data.columns.forEach(function(d,e){e=d.shift();var f=b.data.types[e];if("x"===f){this.data.x=d;this.state.xCount=d.length;this.state.x1=d[.75*d.length<<0];this.state.x2=d[d.length-1];this.state.xg1=d[0];this.state.xg2=d[d.length-1];this.state.xg1Ind=0;this.state.xg2Ind=d.length-1;this.state.xMainMin=d[0];this.state.xMainMax=d[this.state.xg2Ind];this.state.xgMin=d[0];this.state.xgMax=d[this.state.xg2Ind];var g=this.getDefaultZoom({x1:this.state.x1,x2:this.state.x2,xg1:this.state.xg1,xg2:this.state.xg2,default:this.data.subchart.defaultZoom});this.state.x1=g.x1;this.state.x2=g.x2;this.data.mainPeriodLen=this.data.x[1]-this.data.x[0];this.data.detailPeriodLen=this.data.mainPeriodLen;this.data.dates=[];this.data.datesShort=[];this.data.datesRange=[];var k=t.TUtils.getFormatter("xTooltipFormatter",this.data,0),h=t.TUtils.getFormatter("xTickFormatter",this.data,0),m=t.TUtils.getFormatter("xRangeFormatter",this.data,0),x=0;d.forEach(function(r,p){this.data.dates[p]=k(r,!1);this.data.datesShort[p]=h(r,!1);this.data.datesRange[p]=m(r,!1);this.data.datesShort[p].length>x&&(x=this.data.datesShort[p].length)}.bind(this));this.data.maxXTickLength=x}"x"!==f&&(this.data.ys=this.data.ys||[],this.data.yIds=this.data.yIds||{},g=b.data.colors[e],this.data.ys.push({colors_d:[g,g,g],colors_n:[g,g,g],label:b.data.names[e],y:d,ctf:b.data.yCustomTooltipFormatters?b.data.yCustomTooltipFormatters[e]:null,tp:f,id:e}),"line"==f||"step"==f?(this.data.axis_d={x:"#8E8E93",y:"#8E8E93"},this.data.axis_n={x:"rgba(163,177,194,0.6)",y:"rgba(163,177,194,0.6)"}):(this.data.axis_d={x:"rgba(37,37,41,0.5)",y:"rgba(37,37,41,0.5)"},this.data.axis_n={x:"rgba(163,177,194,0.6)",y:"rgba(236,242,248,0.5)"}),d=this.data.ys.length-1,g=-1==this.data.hidden.indexOf(e),this.data.yIds[e]=d,this.state["e_"+d]=g,this.state["o_"+d]=g?1:0,this.state["om_"+d]=g?1:0,this.state["pieInd_"+d]=0,this.state["f_"+d]=1,this.graphStyle=f)}.bind(this));this.state.activeColumnsCount=this.data.ys.length;this.updateSpeed();"area"==this.graphStyle&&(a.Y_AXIS_RANGE=4.06,this.data.hasDetail=!0);a=this.reduceGlobalRange({});a.isReduced&&(this.state.x1=a.x1,this.state.x2=a.x2,this.state.xg1=a.xg1,this.state.xg2=a.xg2,this.state.xg1Ind=a.xg1Ind,this.state.xg2Ind=a.xg2Ind);this.onResize=this.onResize.bind(this);this.onSwitcherChange=this.onSwitcherChange.bind(this);this.onSwitcherEnter=this.onSwitcherEnter.bind(this);this.onSwitcherLeave=this.onSwitcherLeave.bind(this);this.onHandleMove=this.onHandleMove.bind(this);this.toggleZoom=this.toggleZoom.bind(this);this.createDOM(b.container);window.addEventListener("resize",this.onResize);document.addEventListener("darkmode",function(d){this.setDarkMode(!this.darkMode)}.bind(this),!1);document.addEventListener("chart-hide-tips",function(d){d.detail.except!=this&&this.tip.toggle(!1)}.bind(this),!1);this.opts=b;this.onResize();this.darkMode&&this.setDarkMode(this.darkMode);window.matchMedia("(-webkit-min-device-pixel-ratio: 1), (min-resolution: 96dpi)").addListener(this.onResize);window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)").addListener(this.onResize);window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").addListener(this.onResize);window.matchMedia("(-webkit-min-device-pixel-ratio: 3), (min-resolution: 288dpi)").addListener(this.onResize)};C.prototype={reduceGlobalRange:function(b){var a=void 0==b.x1?this.state.x1:b.x1,c=void 0==b.x2?this.state.x2:b.x2,d=void 0==b.xg1?this.state.xg1:b.xg1,e=void 0==b.xg2?this.state.xg2:b.xg2,f=b.useSaved?this.data.saved.x:this.data.x,g=Math.floor(t.TUtils.getXIndex(f,this.state.xgMin)),k=Math.ceil(t.TUtils.getXIndex(f,this.state.xgMax)),h=k,m=g,x=this.state.zoomMode?"bar"==this.graphStyle||"step"==this.graphStyle?1:2:0;"area"==this.graphStyle&&(x=0);this.data.ys.forEach(function(p,n){p=b.useSaved?this.data.saved.y[n]:p.y;if(this.state["e_"+n])for(i=g;i<=k-x;i++)v=p[i],void 0!=v&&(h=Math.min(h,i),m=Math.max(m,i))}.bind(this));m+x==k&&(m=k-Math.max(x-1,0));if(h>=m)return{isReduced:!1};var r=f[h];f=f[m];if(d==r&&e==f)return{isReduced:!1};c>f?(a=f-(c-a),c=f,a<r&&(a=r)):a<r&&(c=r+(c-a),a=r,c>f&&(c=f));return{isReduced:!0,x1:a,x2:c,xg1:r,xg2:f,xg1Ind:h,xg2Ind:m}},getDefaultZoom:function(b){if(!b.default)return{x1:b.x1,x2:b.x2};var a={};a.x1=b.default[0];a.x2=b.default[1];a.x1=Math.max(a.x1,b.xg1);a.x2=Math.min(a.x2,b.xg2);a.x1>=a.x2&&(a.x1=b.xg1,a.x2=b.xg2);return a},updateSpeed:function(b){var a=Math.max(1-.25*(this.state.deviceSpeed*this.state.activeColumnsCount*this.state.xCount*Math.pow((this.state.x2-this.state.x1)/(this.state.xMainMax-this.state.xMainMin),.5)/16.66<<0),0);a=Math.pow(a,.85);b=1;this.state.speed=void 0==b?a:b;return this.state.speed},getYMinMax:function(b,a,c,d,e){function f(u,y,F,Q){if(u==Number.MAX_VALUE)c?void 0==F?(u=B.y1m,y=B.y2m):(u=B["y1m_"+F],y=B["y2m_"+F]):void 0==F?(u=B.y1,y=B.y2):(u=B["y1_"+F],y=B["y2_"+F]);else if("bar"==this.graphStyle&&(u=0),u=Math.floor(u),y=Math.ceil(y),d){var T=t.TUtils.roundRange(u,y,D.Y_AXIS_RANGE,Q);u=T.yMin;y=T.yMax;Math.abs(u-y)<D.Y_AXIS_RANGE*r&&(y=u+Math.floor(D.Y_AXIS_RANGE*r))}.1>Math.abs(u-y)&&y++;return{min:u,max:y,range:T}}if("area"==this.graphStyle)return{min:0,max:102};var g=this.state.dims?this.state.dims.graph.w:this.getGraphWidth(this.data.sideLegend).width,k=Number.MAX_VALUE,h=-Number.MAX_VALUE;g=(a-b)/g;var m=t.TUtils.getXIndex(e?this.data.saved.x:this.data.x,b-g*this.settings.PADD[3]),x=t.TUtils.getXIndex(e?this.data.saved.x:this.data.x,a+g*this.settings.PADD[1]),r=this.data.yMinStep||1,p,n,q,l,w=[],A=[],D=this.settings,B=this.state;!e&&this.state.zoomMode?(m=Math.max(m,this.state.detailInd1),x=Math.min(x,this.state.detailInd2)):(m=Math.max(m,0),x=Math.min(x,this.data.x.length-1));var E=Math.floor(m),G=Math.ceil(m),I=Math.floor(x),z=Math.ceil(x);"line"!=this.graphStyle&&"step"!=this.graphStyle||this.data.ys.forEach(function(u,y){u=e?this.data.saved.y[y]:u.y;var F="step"==this.graphStyle?E:G,Q="step"==this.graphStyle?z:I;if(B["e_"+y]||0==y&&this.pairY){for(p=F;p<=Q;p++)n=u[p],void 0!==n&&(n<k&&(k=n),n>h&&(h=n));"line"==this.graphStyle&&(void 0!==u[E]&&void 0!==u[G]&&(q=u[E]+(m-E)*(u[G]-u[E]),q<k&&(k=q),q>h&&(h=q)),void 0!==u[I]&&void 0!==u[z]&&(l=u[I]+(x-I)*(u[z]-u[I]),l<k&&(k=l),l>h&&(h=l)))}this.pairY&&(u=f(k,h,y,void 0),w[y]=u.min,A[y]=u.max,k=Number.MAX_VALUE,h=-Number.MAX_VALUE)}.bind(this));if("bar"==this.graphStyle){a=[];for(b=0;b<this.data.ys.length;b++)B["e_"+b]&&a.push(b);g=a.length;for(p=E;p<=z;p++){for(b=yCur=0;b<g;b++)yCur+=(e?this.data.saved.y[a[b]][p]:this.data.ys[a[b]].y[p])||0;yCur>h&&(h=yCur)}k=0}if(this.pairY)return isNaN(w[0])&&(w[0]=w[1]),isNaN(w[1])&&(w[1]=w[0]),isNaN(A[0])&&(A[0]=A[1]),isNaN(A[1])&&(A[1]=A[0]),{min:w,max:A};b=f(k,h);return{min:b.min,max:b.max}},setDarkMode:function(b){this.darkMode=b;this.graph.setDarkMode(b);this.axisY.setDarkMode(b);this.fade.setDarkMode(b);this.axisX.setDarkMode(b);this.mini.setDarkMode(b);this.handle.setDarkMode(b);this.tip.setDarkMode(b);this.switchers.setDarkMode(b);this.composer.setDarkMode(b)},getGraphWidth:function(b){var a=this.$el.getBoundingClientRect();return b?(b=this.$switchers.getBoundingClientRect(),500<=a.width-b.width?{hasSpaceForLegend:!0,width:Math.max(a.width-b.width,1)}:{hasSpaceForLegend:!1,width:a.width}):{width:a.width}},onResize:function(){var b=Math.min(window.devicePixelRatio||1,2);if(this.ww!=window.innerWidth||b!=this.settings.dpi){this.settings.dpi=b;this.ww=window.innerWidth;this.data.sideLegend&&(this.$switchers.classList.remove("tchart--switchers__no-space"),b=this.getGraphWidth(!0),b.hasSpaceForLegend||this.$switchers.classList.add("tchart--switchers__no-space"),this.$graph.style.width=b.width+"px");b=this.$graph.getBoundingClientRect();var a=this.settings,c=b.height-a.DATES_HEIGHT-a.MINI_GRAPH_HEIGHT-a.MINI_GRAPH_TOP-a.MINI_GRAPH_BOTTOM;this.state.dims={composer:{w:b.width,h:b.height,l:0,t:0},graph:{w:b.width,h:c,l:0,t:a.DATES_HEIGHT},axisYLeft:{w:a.Y_LABELS_WIDTH,h:c,l:a.PADD[3],t:a.DATES_HEIGHT},axisYRight:{w:a.Y_LABELS_WIDTH,h:c,l:b.width-a.PADD[1]-a.Y_LABELS_WIDTH,t:a.DATES_HEIGHT},axisYLines:{w:b.width-a.PADD[1]-a.PADD[3],h:c,l:a.PADD[3],t:a.DATES_HEIGHT},fadeTop:{w:b.width,h:a.FADE_HEIGHT,l:0,t:a.DATES_HEIGHT},fadeBottom:{w:b.width,h:a.FADE_HEIGHT,l:0,t:a.DATES_HEIGHT+c-a.FADE_HEIGHT},axisX:{w:b.width,h:a.X_LABELS_HEIGHT,l:0,t:a.DATES_HEIGHT+c-a.X_LABELS_HEIGHT},dates:{w:a.DATES_WIDTH,h:a.DATES_HEIGHT,l:b.width-a.DATES_WIDTH-a.PADD[1],t:0},mini:{w:b.width-a.PADD[1]-a.PADD[3],h:a.MINI_GRAPH_HEIGHT,l:a.PADD[3],t:a.DATES_HEIGHT+c+a.MINI_GRAPH_TOP},handle:{w:b.width-a.PADD[1]-a.PADD[3],h:a.MINI_GRAPH_HEIGHT+2,l:a.PADD[3],t:a.DATES_HEIGHT+c+a.MINI_GRAPH_TOP-1},tip:{w:b.width,h:c,l:0,t:a.DATES_HEIGHT}};this.graph.onResize();this.axisY.onResize();this.fade.onResize();this.axisX.onResize();this.mini.onResize();this.handle.onResize();this.tip.onResize();this.composer.onResize()}},createDOM:function(b){var a,c=this.settings;this.$el=document.createElement("div");this.$el.className="tchart";this.data.subchart.show||this.$el.classList.add("tchart__no-subchart");this.data.slave&&this.$el.classList.add("tchart__slave");this.$h1=document.createElement("h1");this.$h1.className="tchart--header";this.$h1.textContent=this.data.caption;this.$el.appendChild(this.$h1);this.$zoom=document.createElement("div");this.$zoom.className="tchart--zoom";this.$el.appendChild(this.$zoom);var d=document.createElement("div");this.$zoom.appendChild(d);d=document.createElement("span");d.textContent="Zoom Out";this.$zoom.appendChild(d);this.$zoom.addEventListener("click",function(){this.toggleZoom(!1)}.bind(this));this.$graph=document.createElement("div");this.$graph.className="tchart--graph";this.$el.appendChild(this.$graph);this.$switchers=document.createElement("div");this.$switchers.className="tchart--switchers";this.data.sideLegend&&this.$switchers.classList.add("tchart--switchers__side-legend");this.$el.appendChild(this.$switchers);b.appendChild(this.$el);b=this.getYMinMax(this.state.x1,this.state.x2,!1,!0);d=this.getYMinMax(this.state.xg1,this.state.xg2,!0);if(this.pairY)for(a=0;a<this.data.ys.length;a++)this.state["y1_"+a]=b.min[a],this.state["y2_"+a]=b.max[a],this.state["y1m_"+a]=d.min[a],this.state["y2m_"+a]=d.max[a];else this.state.y1=b.min,this.state.y2=b.max,this.state.y1m=d.min,this.state.y2m=d.max;this.composer=new t.TComposer({$parent:this.$graph,settings:c,chart:this,state:this.state,data:this.data,graphStyle:this.graphStyle});this.animator=new t.TAnimator({state:this.state,composer:this.composer});b={line:"TLines",step:"TLines",bar:"TBars",area:"TAreas"};[["graph",b[this.graphStyle],this.$graph],["axisX","TAxisX",this.$graph],["fade","TFade",this.$graph],["axisY","TAxisY",this.$graph],["tip","TTip",this.$graph,{onClick:this.toggleZoom}],["mini",b[this.graphStyle],this.$graph,{mini:!0}],["handle","THandle",this.$graph,{cb:this.onHandleMove}],["switchers","TSwitchers",this.$switchers,{onClick:this.onSwitcherChange,onLongTap:this.onSwitcherChange,onEnter:this.onSwitcherEnter,onLeave:this.onSwitcherLeave}]].forEach(function(e){this[e[0]]=new t[e[1]]({animator:this.animator,$canvas:this.composer.$canvas,ctx:this.composer.ctx,graphStyle:this.graphStyle,chart:this,pairY:this.pairY,state:this.state,data:this.data,$parent:e[2],settings:c,additional:e[3]||{}});this[e[0]].id=e[0]}.bind(this))},onHandleMove:function(b,a,c,d){this.updateSpeed();var e=[],f=this.getYMinMax(b,a,!1,!0);this.axisX.setAnimation("both"!=c);this.axisY.setAnimation(!0);this.axisY.setForceUpdate(!1);d&&t.TUtils.triggerEvent("chart-hide-tips",{except:null});e.push({prop:"x1",state:this.state,end:b,fixed:!0,duration:0,group:{top:!0,bottom:!0}});e.push({prop:"x2",state:this.state,end:a,fixed:!0,duration:0,group:{top:!0,bottom:!0}});for(i=0;i<this.data.ys.length;i++)"line"!=this.graphStyle&&"step"!=this.graphStyle||e.push({prop:this.pairY?"y1_"+i:"y1",state:this.state,end:this.pairY?f.min[i]:f.min,duration:500,fixed:!0,tween:"exp",speed:.25,group:{top:!0}}),"area"!=this.graphStyle&&e.push({prop:this.pairY?"y2_"+i:"y2",state:this.state,end:this.pairY?f.max[i]:f.max,duration:500,fixed:!0,tween:"exp",speed:.25,group:{top:!0}});this.animator.add(e)},onSwitcherEnter:function(b){clearTimeout(this.switcherLeaveTimeout);var a=[];for(i=0;i<this.data.ys.length;i++)a.push({prop:"f_"+i,state:this.state,end:b==i?1:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}}),a.push({prop:"pieInd_"+i,state:this.state,end:b==i?1:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}});this.animator.add(a)},onSwitcherLeave:function(b){clearTimeout(this.switcherLeaveTimeout);this.switcherLeaveTimeout=setTimeout(function(){var a=[];for(i=0;i<this.data.ys.length;i++)a.push({prop:"f_"+i,state:this.state,end:1,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}}),a.push({prop:"pieInd_"+i,state:this.state,end:0,duration:300,tween:"exp",speed:.15,group:{top:!0,bottom:!0}});this.animator.add(a)}.bind(this),300)},onSwitcherChange:function(b,a){var c,d=[],e=[],f=[];this.updateSpeed();if("boolean"!=typeof b){var g=!0;a=b;var k=!0;for(c=0;c<this.data.ys.length;c++)k=k&&(c==a?this.state["e_"+c]:!this.state["e_"+c])}for(c=0;c<this.data.ys.length;c++){var h=c==a;f[c]=this.state["e_"+c];g?this.state["e_"+c]=h:h&&(this.state["e_"+c]=!!b);k&&g&&(this.state["e_"+c]=!0);e[c]=this.state["e_"+c]}c=this.reduceGlobalRange({});c.isReduced?(d.push({prop:"x1",state:this.state,end:c.x1,duration:333,group:{top:!0,bottom:!0}}),d.push({prop:"x2",state:this.state,end:c.x2,duration:333,group:{top:!0,bottom:!0}}),d.push({prop:"xg1",state:this.state,end:c.xg1,duration:333,group:{top:!0,bottom:!0}}),d.push({prop:"xg2",state:this.state,end:c.xg2,duration:333,group:{top:!0,bottom:!0}}),this.state.xg1Ind=c.xg1Ind,this.state.xg2Ind=c.xg2Ind,b=this.getYMinMax(c.x1,c.x2,!1,!0),a=this.getYMinMax(c.xg1,c.xg2,!0)):(b=this.getYMinMax(this.state.x1,this.state.x2,!1,!0),a=this.getYMinMax(this.state.xg1,this.state.xg2,!0));t.TUtils.triggerEvent("chart-hide-tips",{except:null});this.axisY.setForceUpdate(!0);this.axisY.setAnimation(!0);for(c=this.state.activeColumnsCount=0;c<e.length;c++)e[c]&&this.state.activeColumnsCount++,f[c]!=e[c]&&(d.push({prop:"o_"+c,state:this.state,end:e[c]?1:0,duration:300,group:{top:!0}}),d.push({prop:"om_"+c,state:this.state,end:e[c]?1:0,duration:"line"==this.graphStyle||"step"==this.graphStyle?166:300,delay:e[c]&&"line"==this.graphStyle||"step"==this.graphStyle?200:0,tween:"linear",group:{bottom:!0}}));for(c=0;c<(this.pairY?e.length:1);c++)"line"!=this.graphStyle&&"step"!=this.graphStyle||d.push({prop:this.pairY?"y1_"+c:"y1",state:this.state,end:this.pairY?b.min[c]:b.min,duration:this.pairY?0:333,group:{top:!0}}),"area"!=this.graphStyle&&d.push({prop:this.pairY?"y2_"+c:"y2",state:this.state,end:this.pairY?b.max[c]:b.max,duration:this.pairY?0:333,group:{top:!0}}),"line"!=this.graphStyle&&"step"!=this.graphStyle||d.push({prop:this.pairY?"y1m_"+c:"y1m",state:this.state,end:this.pairY?a.min[c]:a.min,duration:this.pairY?0:316,group:{bottom:!0}}),"area"!=this.graphStyle&&d.push({prop:this.pairY?"y2m_"+c:"y2m",state:this.state,end:this.pairY?a.max[c]:a.max,duration:this.pairY?0:316,group:{bottom:!0}});this.state.y1m_hidd=this.state.y1m;this.state.y2m_hidd=this.state.y2m;this.state.y1m_show=a.min;this.state.y2m_show=a.max;this.switchers.render(e);this.animator.add(d)},toggleSlave:function(b,a,c,d){var e=[];this.updateSpeed(d);if(this.state.zoomModeSlave!=b){this.state.zoomSpecialOrigin=a;if(b){this.state.zoomModeSlave=!0;this.switchers.switchers.forEach(function(x,r){x.classList.add("tchart--switcher__visible");x.getElementsByTagName("span")[0].textContent=c.names[r]});this.tip.labels.forEach(function(x,r){x.$label.textContent=c.names[r]});this.data.x=c.x;a=[];for(var f=0;f<c.y.length;f++)this.data.ys[f].y=c.y[f],d=-1==c.hidden.indexOf(this.data.ys[f].id),this.state["e_"+f]=d,this.state["o_"+f]=d?1:0,this.state["om_"+f]=d?1:0,a[f]=d;this.switchers.render(a);a=this.data.x[0];d=this.data.x[this.data.x.length-1];this.data.dates=[];this.data.datesShort=[];this.data.datesRange=[];var g=t.TUtils.getFormatter("xTooltipFormatter",this.data,1),k=t.TUtils.getFormatter("xTickFormatter",this.data,1),h=t.TUtils.getFormatter("xRangeFormatter",this.data,1),m=0;for(f=0;f<this.data.x.length;f++)this.data.dates[f]=g(this.data.x[f],!0),this.data.datesShort[f]=k(this.data.x[f],!0),this.data.datesRange[f]=h(this.data.x[f],!0),this.data.datesShort[f].length>m&&(m=this.data.datesShort[f].length);this.data.maxXTickLength=m;this.data.subchart=c.subchart;this.data.hidden=c.hidden;f=this.getDefaultZoom({x1:a,x2:d,xg1:a,xg2:d,default:this.data.subchart.defaultZoom});this.state.x1=f.x1;this.state.x2=f.x2;this.state.xCount=this.data.x.length;this.state.xg1=a;this.state.xg2=d;this.state.xg1Ind=0;this.state.xg2Ind=this.data.x.length-1;this.state.xMainMin=a;this.state.xMainMax=d;this.state.xgMin=a;this.state.xgMax=d;f=this.reduceGlobalRange({});f.isReduced&&(this.state.x1=f.x1,this.state.x2=f.x2,this.state.xg1=f.xg1,this.state.xg2=f.xg2,this.state.xg1Ind=f.xg1Ind,this.state.xg2Ind=f.xg2Ind);f=this.getYMinMax(this.state.x1,this.state.x2,!1,!0);a=this.getYMinMax(a,d,!0);this.state.y1=f.min;this.state.y2=f.max;this.state.y1m=a.min;this.state.y2m=a.max}else this.switchers.switchers.forEach(function(x,r){x.classList.remove("tchart--switcher__visible")});setTimeout(function(){b||(this.state.zoomModeSlave=!1)}.bind(this),470);this.state.slaveVisibility=b?0:1;e.push({prop:"slaveVisibility",state:this.state,end:b?1:0,duration:450,group:{top:!0,bottom:!0}});this.animator.add(e)}},toggleZoomSpecial:function(b,a,c){var d=[];if(this.state.zoomModeSpecial!=b){var e=this.updateSpeed();if(b){var f=(this.state.x2-this.state.x1)/(this.state.dims.graph.w-this.settings.PADD[3]-this.settings.PADD[1]),g=this.settings.PADD[3]*f;this.state.zoomSpecialOrigin=(a-this.state.x1+g)/(this.state.x2-this.state.x1+g+this.settings.PADD[1]*f);this.state.zoomModeSpecial=!0;this.$h1.classList.add("tchart--header__hidden");this.$zoom.classList.add("tchart--zoom__visible");this.switchers.switchers.forEach(function(k,h){k.classList.remove("tchart--switcher__visible")});this.slaveChart.toggleSlave(!0,this.state.zoomSpecialOrigin,c,e)}else this.$h1.classList.remove("tchart--header__hidden"),this.$zoom.classList.remove("tchart--zoom__visible"),this.switchers.switchers.forEach(function(k,h){k.classList.add("tchart--switcher__visible")}),this.slaveChart.toggleSlave(!1,this.state.zoomSpecialOrigin,null,e);document.body.style.pointerEvents="none";setTimeout(function(){b||(this.state.zoomModeSpecial=!1);document.body.style.pointerEvents=""}.bind(this),470);this.state.masterVisibility=b?1:0;d.push({prop:"masterVisibility",state:this.state,end:b?0:1,duration:450,group:{top:!0,bottom:!0}});this.animator.add(d)}},toggleZoom:function(b,a,c){c&&void 0==this.specialZoomTransition&&(c.columns.length!=this.data.ys.length+1&&(this.specialZoomTransition=!0),this.specialZoomTransition||c.columns.forEach(function(p,n){var q=p[0];p=c.types[q];var l=c.names[q];n=this.data.yIds[q];if(void 0!=n){if(q=this.data.ys[n].label,this.data.ys[n].tp!=p||q!=l)this.specialZoomTransition=!0}else"x"!==q&&(this.specialZoomTransition=!0)}.bind(this)),void 0==this.specialZoomTransition&&(this.specialZoomTransition=!1));if(this.specialZoomTransition&&(this.data.master=!0,this.$el.classList.add("tchart__master"),!this.slaveChart)){var d=JSON.parse(JSON.stringify(c));d.yTickFormatter=c.yTickFormatter;d.yTooltipFormatter=c.yTooltipFormatter;d.yCustomTooltipFormatters=c.yCustomTooltipFormatters;d.xTickFormatter=c.xTickFormatter;d.xTooltipFormatter=c.xTooltipFormatter;d.xRangeFormatter=c.xRangeFormatter;d.sideLegend=this.data.sideLegend;this.slaveChart=new t.TChart({container:this.opts.container,slave:!0,data:d});this.slaveChart.setDarkMode(this.darkMode)}c&&!c.details&&(c.details={y:[],names:[]},c.columns.forEach(function(p,n){n=p.shift();var q=c.names[n];"x"===c.types[n]?c.details.x=p:this.specialZoomTransition?(c.details.y.push(p),c.details.names.push(q)):c.details.y[this.data.yIds[n]]=p}.bind(this)));c&&(c.subchart={show:c.subchart&&void 0!=c.subchart.show?c.subchart.show:!0,defaultZoom:c.subchart&&c.subchart.defaultZoom},c.details.subchart=c.subchart,c.details.hidden=c.hidden||[]);if(this.specialZoomTransition)this.toggleZoomSpecial(b,a,c&&c.details);else{var e=c&&c.details;d=[];if(this.state.zoomMode!=b){if(b){this.state.zoomMode=!0;this.state.zoomDir=1;this.$h1.classList.add("tchart--header__hidden");this.$zoom.classList.add("tchart--zoom__visible");this.zoomEnterSpeed=this.updateSpeed();c&&(this.data.details={yTickFormatter:c.yTickFormatter,yTooltipFormatter:c.yTooltipFormatter,yCustomTooltipFormatters:c.yCustomTooltipFormatters,xTickFormatter:c.xTickFormatter,xTooltipFormatter:c.xTooltipFormatter,xRangeFormatter:c.xRangeFormatter,subchart:c.subchart,hidden:c.hidden||[]});if(!this.hasSavedData){this.data.saved={};this.data.saved.x=this.data.x.slice();this.data.saved.dates=this.data.dates.slice();this.data.saved.datesShort=this.data.datesShort.slice();this.data.saved.datesRange=this.data.datesRange.slice();this.data.saved.y=[];for(j=0;j<this.data.ys.length;j++)this.data.saved.y[j]=this.data.ys[j].y.slice();this.hasSavedData=!0}this.data.details&&this.data.details.subchart&&(this.data.details.subchart.show?this.$el.classList.remove("tchart__no-subchart"):this.$el.classList.add("tchart__no-subchart"));this.state.zoomSaved={x1:this.state.x1,x2:this.state.x2,xg1:this.state.xg1,xg2:this.state.xg2,xgMin:this.state.xgMin,xgMax:this.state.xgMax};var f=this.data.mainPeriodLen;var g=a;a+=f;this.data.details&&(a=this.getDefaultZoom({x1:g,x2:a,xg1:e.x[0],xg2:e.x[e.x.length-1],default:this.data.details.subchart.defaultZoom}),g=a.x1,a=a.x2);if("area"!=this.graphStyle){this.data.detailPeriodLen=e.x[1]-e.x[0];var k=e.x[0];var h=e.x[e.x.length-1]}else{this.data.detailPeriodLen=f;var m=this.data.pieZoomRange;k=g-(m-f)/2;h=k+m;a=g+Math.round(m/7/f)*f;k<this.data.x[0]?(k=this.data.x[0],h=k+m,h>this.data.x[this.data.x.length-1]&&(h=this.data.x[this.data.x.length-1]+f)):h>this.data.x[this.data.x.length-1]&&(h=this.data.x[this.data.x.length-1]+f,k=h-m,k<this.data.x[0]&&(k=this.data.x[0]))}k=Math.round(k/f)*f;h=Math.round(h/f)*f;"area"!=this.graphStyle&&this.insertDetails(k,h,e);this.state.xgMin=k;this.state.xgMax=h}else this.updateSpeed(this.zoomEnterSpeed/("area"==this.graphStyle?2:1)),this.$h1.classList.remove("tchart--header__hidden"),this.$zoom.classList.remove("tchart--zoom__visible"),this.data.details&&(this.data.subchart.show?this.$el.classList.remove("tchart__no-subchart"):this.$el.classList.add("tchart__no-subchart")),this.state.zoomDir=-1,g=this.state.zoomSaved.x1,a=this.state.zoomSaved.x2,k=this.state.zoomSaved.xg1,h=this.state.zoomSaved.xg2,this.state.xgMin=this.state.zoomSaved.xgMin,this.state.xgMax=this.state.zoomSaved.xgMax;this.axisY.setForceUpdate(!0);this.axisY.setAnimation(!0);this.axisX.setAnimation(!0);e=450;var x=f=0;"area"==this.graphStyle&&(e=350,b?x=.95*e:f=.95*e);m=this.reduceGlobalRange({x1:g,x2:a,xg1:k,xg2:h,useSaved:!b});m.isReduced&&(g=m.x1,a=m.x2,k=m.xg1,h=m.xg2);this.state.xg1Ind=Math.floor(t.TUtils.getXIndex(b?this.data.x:this.data.saved.x,k));this.state.xg2Ind=Math.ceil(t.TUtils.getXIndex(b?this.data.x:this.data.saved.x,h));m=this.getYMinMax(g,a,!1,!0,!b);var r=this.getYMinMax(k,h,!0,!1,!b);document.body.style.pointerEvents="none";setTimeout(function(){b||(this.state.zoomMode=!1,"area"!=this.graphStyle&&this.revertDetails());document.body.style.pointerEvents="";this.composer.render({top:!0,bottom:!0})}.bind(this),e+20+("area"==this.graphStyle?.9*e:0));this.state.zoomMorph=b?0:1;d.push({prop:"zoomMorph",state:this.state,end:b?1:0,duration:e,delay:x,group:{top:!0,bottom:!0}});d.push({prop:"x1",state:this.state,end:g,delay:f,duration:e,group:{top:!0,bottom:!0}});d.push({prop:"x2",state:this.state,end:a,delay:f,duration:e,group:{top:!0,bottom:!0}});d.push({prop:"xg1",state:this.state,end:k,delay:f,duration:e,group:{top:!0,bottom:!0}});d.push({prop:"xg2",state:this.state,end:h,delay:f,duration:e,group:{top:!0,bottom:!0}});for(g=0;g<(this.pairY?this.data.ys.length:1);g++)"line"!=this.graphStyle&&"step"!=this.graphStyle||d.push({prop:this.pairY?"y1_"+g:"y1",state:this.state,end:this.pairY?m.min[g]:m.min,delay:f,duration:e,group:{top:!0}}),"area"!=this.graphStyle&&d.push({prop:this.pairY?"y2_"+g:"y2",state:this.state,end:this.pairY?m.max[g]:m.max,delay:f,duration:e,group:{top:!0}}),"line"!=this.graphStyle&&"step"!=this.graphStyle||d.push({prop:this.pairY?"y1m_"+g:"y1m",state:this.state,end:this.pairY?r.min[g]:r.min,delay:f,duration:e,group:{bottom:!0}}),"area"!=this.graphStyle&&d.push({prop:this.pairY?"y2m_"+g:"y2m",state:this.state,end:this.pairY?r.max[g]:r.max,delay:f,duration:e,group:{bottom:!0}});this.animator.add(d)}}},insertDetails:function(b,a,c){b=Math.ceil(t.TUtils.getXIndex(this.data.x,b));var d=Math.ceil(t.TUtils.getXIndex(this.data.x,a)),e=c.x.length-1;a>this.data.x[d]&&d++;a=d-("bar"==this.graphStyle||"step"==this.graphStyle?1:0);d=this.data.x.length-1;var f=[],g=[],k=[],h=[],m,x,r=[],p=[];for(m=0;m<b;m++){var n=m-0;f[n]=this.data.x[m];g[n]=this.data.dates[m];k[n]=this.data.datesShort[m];h[n]=this.data.datesRange[m]}for(j=0;j<this.data.ys.length;j++){r[j]=r[j]||[];var q=r[j];var l=this.data.ys[j].y;for(m=0;m<b;m++)q[m-0]=l[m]}var w=[],A=[],D=[];q=t.TUtils.getFormatter("xTooltipFormatter",this.data,1);var B=t.TUtils.getFormatter("xTickFormatter",this.data,1);l=t.TUtils.getFormatter("xRangeFormatter",this.data,1);for(m=x=0;m<=e;m++)n=m-0+b,f[n]=c.x[m],g[n]=q(f[n],!0),k[n]=B(f[n],!0),h[n]=l(f[n],!0),k[n].length>x&&(x=k[n].length),n=t.TUtils.getXIndex(this.data.x,f[n]),w[m]=n,A[m]=Math.floor(n),D[m]=Math.ceil(n);this.data.details.maxXTickLength=x;for(j=0;j<this.data.ys.length;j++)for(r[j]=r[j]||[],q=r[j],l=this.data.ys[j].y,x=c.y[j],p[j]=p[j]||[],B=p[j],m=0;m<=e;m++){n="bar"==this.graphStyle?l[A[m]]||0:"step"==this.graphStyle?l[A[m]]:l[A[m]]+(w[m]-A[m])*(l[D[m]]-l[A[m]]);var E=x[m];"bar"!==this.graphStyle&&isNaN(n)&&!isNaN(E)&&(n=0);q[m-0+b]=E;B[m-0+b]=n}for(m=a+1;m<=d;m++)n=m-a+e+b,f[n]=this.data.x[m],g[n]=this.data.dates[m],k[n]=this.data.datesShort[m],h[n]=this.data.datesRange[m];for(j=0;j<this.data.ys.length;j++)for(r[j]=r[j]||[],q=r[j],l=this.data.ys[j].y,m=a+1;m<=d;m++)q[m-a+e+b]=l[m];this.state.detailInd1=b;this.state.detailInd2=b+e-0;this.data.x=f;this.data.dates=g;this.data.datesShort=k;this.data.datesRange=h;for(j=0;j<this.data.ys.length;j++)this.data.ys[j].y=r[j],this.data.ys[j].yFrom=p[j]},revertDetails:function(){this.data.x=this.data.saved.x;this.data.dates=this.data.saved.dates;this.data.datesShort=this.data.saved.datesShort;this.data.datesRange=this.data.saved.datesRange;for(i=0;i<this.data.ys.length;i++)this.data.ys[i].y=this.data.saved.y[i]}};t.TChart=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;this.$canvas=document.createElement("canvas");this.$canvas.className="tchart--graph-canvas";this.ctx=this.$canvas.getContext("2d");b.$parent.appendChild(this.$canvas);this.deviceSpeed=void 0};C.prototype={onResize:function(){var b=this.opts.settings.dpi,a=this.opts.state.dims.composer;this.$canvas.width=a.w*b;this.$canvas.height=a.h*b;this.render({top:!0,bottom:!0})},setDarkMode:function(b){this.isDarkMode=b;this.onResize()},render:function(b){if(void 0==this.deviceSpeed){var a=performance.now(),c=this.opts.state.x1;this.opts.state.x1=this.opts.state.xMainMin;this.renderInner(b);var d=performance.now();this.opts.state.x1=c}this.renderInner(b);void 0==this.deviceSpeed&&(this.deviceSpeed=(d-a)/("line"==this.opts.graphStyle||"step"==this.opts.graphStyle?1.5:2)/(this.opts.data.x.length*this.opts.data.ys.length),this.opts.state.deviceSpeed=this.deviceSpeed)},renderInner:function(b){var a=this.opts.state.dims,c=this.opts.state,d=this.ctx,e=this.opts.settings.dpi,f=this.opts.settings,g=f.PADD,k=void 0==c.zoomMorph?0:c.zoomMorph,h="area"==this.opts.graphStyle&&c.zoomMode&&1>k,m="area"==this.opts.graphStyle&&c.zoomMode&&1==k;this.opts.data.master&&(this.$canvas.style.opacity=c.masterVisibility);this.opts.data.slave&&(this.$canvas.style.opacity=c.slaveVisibility,this.opts.chart.$el.style.visibility=0<c.slaveVisibility?"visible":"hidden");if(b.top){d.clearRect(a.dates.l*e,a.dates.t*e,a.dates.w*e,a.dates.h*e);if("line"==this.opts.graphStyle||"step"==this.opts.graphStyle||"area"==this.opts.graphStyle&&0<k||this.opts.data.slave&&1>c.slaveVisibility||this.opts.data.master&&1>c.masterVisibility)m?d.clearRect(a.graph.l*e,(a.graph.t-18)*e,a.graph.w*e,(a.graph.h+30)*e):d.clearRect(a.graph.l*e,a.graph.t*e,a.graph.w*e,a.graph.h*e);if("area"==this.opts.graphStyle&&0==k||"bar"==this.opts.graphStyle)d.clearRect(a.graph.l*e,a.graph.t*e,a.graph.w*e,(f.PADD[0]+4)*e),d.clearRect(a.graph.l*e,(a.graph.t+g[0])*e,g[3]*e,(a.graph.h-g[0]-g[2])*e),d.clearRect(a.graph.l*e,(a.graph.t+a.graph.h-g[2])*e,a.graph.w*e,g[2]*e),d.clearRect((a.graph.l+a.graph.w-g[1]-1)*e,(a.graph.t+g[0])*e,(g[1]+1)*e,(a.graph.h-g[0]-g[2])*e);h||m||(d.save(),d.beginPath(),d.rect(a.graph.l*e,a.graph.t*e,a.graph.w*e,a.graph.h*e),d.clip());this.opts.data.master&&1>c.masterVisibility&&(d.save(),g=5*(1-c.masterVisibility)+1,d.translate(a.graph.w*c.zoomSpecialOrigin*(1-g),0),d.scale(g,1));this.opts.data.slave&&1>c.slaveVisibility&&(d.save(),g=c.slaveVisibility,d.translate(a.graph.w*c.zoomSpecialOrigin*(1-g),0),d.scale(g,1));g=1;"area"==this.opts.graphStyle&&c.zoomMode&&(g=1-k);if(h){d.save();f=f.PIE_RADIUS;var x=a.graph.w+k*(2*f-a.graph.w),r=a.graph.h-42+k*(2*f-a.graph.h+42);t.TUtils.drawRoundedRect2(d,e,x,r,(a.graph.w-x)/2+a.graph.l,(a.graph.h-42-r)/2+a.graph.t+23,k*f);d.clip()}this.opts.chart.graph.render();h&&d.restore();this.opts.data.master&&1>c.masterVisibility&&d.restore();this.opts.data.slave&&1>c.slaveVisibility&&d.restore();this.opts.chart.axisY.render(g);this.opts.chart.fade.render();h||m||d.restore();this.opts.chart.axisX.render(g)}b.bottom&&(d.clearRect(a.graph.l*e,(a.handle.t-1)*e,a.graph.w*e,(a.handle.h+2)*e),b=this.opts.data.subchart.show,(c=!this.opts.data.master&&!this.opts.data.slave&&this.opts.data.details&&this.opts.data.subchart.show!=this.opts.data.details.subchart.show)&&(b=b?1>k:0<k),b&&(d.save(),t.TUtils.drawRoundedRect(d,e,a.mini.w,a.mini.h,a.mini.l,a.mini.t,7),d.clip(),this.opts.chart.mini.render(),d.restore(),this.opts.chart.handle.render()),c&&0<k&&1>k&&(d.fillStyle=this.isDarkMode?"#242f3e":"#fff",d.globalAlpha=this.opts.data.subchart.show?k:1-k,d.fillRect(a.graph.l*e,(a.handle.t-1)*e,a.graph.w*e,(a.handle.h+2)*e),d.globalAlpha=1))}};t.TComposer=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;this.onDragStart=this.onDragStart.bind(this);this.onDragMove=this.onDragMove.bind(this);this.onDragEnd=this.onDragEnd.bind(this);this.isTouch=t.TUtils.isTouchDevice();this.skipMoveEnd=!0;var a=b.useElForMove?b.$el:window;b.$el.addEventListener(this.isTouch?"touchstart":"mousedown",this.onDragStart,{passive:!1});a.addEventListener(this.isTouch?"touchmove":"mousemove",this.onDragMove,{passive:!1});a.addEventListener(this.isTouch?"touchend":"mouseup",this.onDragEnd,{passive:!1})};C.prototype={onDragStart:function(b){this.skipMoveEnd=!0;clearTimeout(this.pointerTimeout);this.isTouch&&1<b.touches.length||(this.scroll=void 0,this.x=this.isTouch?b.touches[0].pageX:b.pageX,this.y=this.isTouch?b.touches[0].pageY:b.pageY,this.dY=this.dX=0,this.pageX=this.x,this.pageY=this.y,delete this.prevDx,delete this.prevDy,this.opts.onDragStart({pageX:this.x,pageY:this.y,isTouch:this.isTouch})||(this.skipMoveEnd=!1))},onDragMove:function(b){if(!this.skipMoveEnd&&"v"!=this.scroll){var a=this.isTouch?b.touches[0].pageX:b.pageX,c=this.isTouch?b.touches[0].pageY:b.pageY;this.dX=a-this.x;this.dY=c-this.y;this.pageX=a;this.pageY=c;if(this.isTouch)if("h"==this.scroll)!this.opts.noPrevent&&b.preventDefault();else if(5<Math.abs(this.dX)||5<Math.abs(this.dY))this.scroll=Math.abs(this.dX)>Math.abs(this.dY)?"h":"v";if(this.prevDx!=this.dX||this.prevDy!=this.dY)this.opts.onDragMove&&this.opts.onDragMove({canceled:"v"==this.scroll,d:this.dX,pageX:this.pageX,pageY:this.pageY,isTouch:this.isTouch}),this.prevDx=this.dX,this.prevDy=this.dY}},onDragEnd:function(b){this.skipMoveEnd||(this.skipMoveEnd=!0,this.opts.onDragEnd&&this.opts.onDragEnd({isTouch:this.isTouch,e:b}))}};t.TDrag=C})();(function(){var t=function(C){this.opts=C;this.ctx=C.ctx;"area"!=this.opts.graphStyle&&(this.$fadeTop=document.createElement("canvas"),this.ctxFadeTop=this.$fadeTop.getContext("2d"),"bar"!=this.opts.graphStyle&&(this.$fadeBottom=document.createElement("canvas"),this.ctxFadeBottom=this.$fadeBottom.getContext("2d")))};t.prototype={onResize:function(){var C=this.opts.settings.dpi,b=this.opts.state.dims.fadeTop,a=this.opts.state.dims.fadeBottom;if("area"!=this.opts.graphStyle){var c=this.ctxFadeTop.createLinearGradient(0,0,0,b.h*C);this.isDarkMode?(c.addColorStop(0,"rgba(36,47,62,1)"),c.addColorStop(1,"rgba(36,47,62,0)")):(c.addColorStop(0,"rgba(255,255,255,1)"),c.addColorStop(1,"rgba(255,255,255,0)"));this.$fadeTop.width=b.w*C;this.$fadeTop.height=b.h*C;this.ctxFadeTop.fillStyle=c;this.ctxFadeTop.fillRect(0,0,b.w*C,b.h*C);"bar"!=this.opts.graphStyle&&(b=this.ctxFadeBottom.createLinearGradient(0,0,0,a.h*C),this.isDarkMode?(b.addColorStop(0,"rgba(36,47,62,0)"),b.addColorStop(1,"rgba(36,47,62,1)")):(b.addColorStop(0,"rgba(255,255,255,0)"),b.addColorStop(1,"rgba(255,255,255,1)")),this.$fadeBottom.width=a.w*C,this.$fadeBottom.height=a.h*C,this.ctxFadeBottom.fillStyle=b,this.ctxFadeBottom.fillRect(0,0,a.w*C,a.h*C))}},setDarkMode:function(C){this.isDarkMode=C;this.onResize()},render:function(){var C=this.opts.settings.dpi,b=this.opts.state.dims.fadeTop,a=this.opts.state.dims.fadeBottom;this.$fadeTop&&this.ctx.drawImage(this.$fadeTop,b.l*C,b.t*C);this.$fadeBottom&&this.ctx.drawImage(this.$fadeBottom,a.l*C,a.t*C)}};window.Graph.units.TFade=t})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;this.ctx=b.ctx;this.isTouch=t.TUtils.isTouchDevice();this.$canvas=b.$canvas;this.drag=new t.TDrag({$el:this.$canvas,onDragStart:function(a){this.canvasPos=t.TUtils.getElemPagePos(this.$canvas);var c=a.pageX-this.canvasPos.x,d=a.pageY-this.canvasPos.y;this._x1=b.state.x1;this._x2=b.state.x2;this.constrainHandleSize(!1);this.tp=this.getTp(c-b.settings.PADD[3],d-(this.opts.state.dims.composer.h-b.settings.MINI_GRAPH_HEIGHT-b.settings.MINI_GRAPH_BOTTOM),a.isTouch);this.firstMove=!0;return!this.tp}.bind(this),onDragMove:function(a){this.onDragMove(a.d);this.firstMove=!1}.bind(this),onDragEnd:function(a){}.bind(this)});this.onMouseMove=this.onMouseMove.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.trackMouse(!0)};C.prototype={getTp:function(b,a,c){var d=this.opts.state.dims.handle,e=this.opts.state,f=this.opts.state.zoomMode;if(0>a||a>d.h)return"";var g=c?.3*d.w:10;c&&14>g&&(g=14);c&&30<g&&(g=30);a=this.prevX1+(c?e.x1==e.xg1?-5:-15:0);d=a+g;c=this.prevX2+(c?e.x2==e.xg2?5:15:0);g=c-g;.01>Math.abs(e.x2-e.x1-(f?this.opts.data.mainPeriodLen:this.minRange))&&(e.x2==e.xg2&&(g=c+1),e.x1==e.xg1&&(d=a-1));return b>d&&b<g?"both":b>=a&&b<=d?"start":b>=g&&b<=c?"end":""},trackMouse:function(b){this.isTouch||(this.$canvas.addEventListener("mousemove",this.onMouseMove),this.$canvas.addEventListener("mouseleave",this.onMouseLeave))},onMouseLeave:function(){this.$canvas.classList.remove("tchart--graph-canvas__handle-pointer");this.$canvas.classList.remove("tchart--graph-canvas__handle-grab");this.$canvas.classList.remove("tchart--graph-canvas__handle-col-resize");delete this.canvasPos},onMouseMove:function(b){this.canvasPos=this.canvasPos||t.TUtils.getElemPagePos(this.$canvas);b=this.getTp(b.pageX-this.canvasPos.x-this.opts.settings.PADD[3],b.pageY-this.canvasPos.y-(this.opts.state.dims.composer.h-this.opts.settings.MINI_GRAPH_HEIGHT-this.opts.settings.MINI_GRAPH_BOTTOM),!1);var a={"":"",both:this.opts.settings.isIE?"pointer":"grab",start:"col-resize",end:"col-resize"};this.onMouseLeave();a[b]&&this.$canvas.classList.add("tchart--graph-canvas__handle-"+a[b])},onResize:function(b){this.constrainHandleSize(!0)},setDarkMode:function(b){this.isDarkMode=b},constrainHandleSize:function(b){var a=32/(this.opts.state.dims.handle.w/(this.opts.state.xg2-this.opts.state.xg1)),c=this.opts.state.x1,d=this.opts.state.x2,e=this.opts.state.xg2;this.minRange=a;d-c<a&&(d=c+a,d>e&&(d=e,c=d-a),b&&this.opts.additional.cb(c,d,"constraint"))},onDragMove:function(b){var a=this.tp,c=this.opts.state;b=b/this.opts.state.dims.handle.w*(c.xg2-c.xg1);var d=this._x1,e=this._x2;if("both"==a){var f=d+b;var g=e+b;f<c.xg1&&(f=c.xg1,g=c.xg1+e-d);g>c.xg2&&(f=c.xg2-(e-d),g=c.xg2)}"start"==a&&(g=c.x2,f=Math.min(Math.max(d+b,c.xg1),g-this.minRange));"end"==a&&(f=c.x1,g=Math.max(Math.min(e+b,c.xg2),f+this.minRange));c.x1==f&&c.x2==g||this.opts.additional.cb(f,g,a,this.firstMove)},render:function(){var b=this.opts.state.dims.handle,a=this.opts.settings.dpi,c=this.opts.state,d=1/(c.xg2-c.xg1),e=Math.round((c.x1-c.xg1)*d*b.w);c=Math.round((c.x2-c.xg1)*d*b.w);d=this.ctx;d.fillStyle=this.isDarkMode?"rgba(48, 66, 89, 0.6)":"rgba(226, 238, 249, 0.6)";t.TUtils.drawRoundedRect(d,a,e+4,b.h-2,b.l,b.t+1,[7,0,0,7]);d.fill();t.TUtils.drawRoundedRect(d,a,b.w-c+4,b.h-2,b.l+c-4,b.t+1,[0,7,7,0]);d.fill();this.isDarkMode||"line"==this.opts.graphStyle||"step"==this.opts.graphStyle||(d.fillStyle="#fff",t.TUtils.drawRoundedRect(d,a,12,b.h+2,b.l+e-1,b.t-1,[8,0,0,8]),d.fill(),t.TUtils.drawRoundedRect(d,a,12,b.h+2,b.l+c-11,b.t-1,[0,8,8,0]),d.fill());d.fillStyle=this.isDarkMode?"#56626D":"#C0D1E1";t.TUtils.drawRoundedRect(d,a,10,b.h,b.l+e,b.t,[7,0,0,7]);d.fill();t.TUtils.drawRoundedRect(d,a,10,b.h,b.l+c-10,b.t,[0,7,7,0]);d.fill();d.fillRect((b.l+e+10)*a,b.t*a,(c-e-20)*a,a);d.fillRect((b.l+e+10)*a,(b.t+b.h-1)*a,(c-e-20)*a,a);d.strokeStyle="#fff";this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.lineWidth=2*a;d.beginPath();d.moveTo((b.l+e+5)*a,(b.t+17)*a);d.lineTo((b.l+e+5)*a,(b.t+25)*a);d.moveTo((b.l+c-5)*a,(b.t+17)*a);d.lineTo((b.l+c-5)*a,(b.t+25)*a);d.stroke();this.prevX1=e;this.prevX2=c}};t.THandle=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;this.$canvas=document.createElement("canvas");this.ctx=this.$canvas.getContext("2d",{alpha:!0})};C.prototype={onResize:function(){var b=this.opts.settings.dpi,a=this.opts.additional.mini?this.opts.state.dims.mini:this.opts.state.dims.graph;this.$canvas.width=a.w*b;this.$canvas.height=a.h*b;this.cached="";this.ctx.fillStyle=this.isDarkMode?"#242f3e":"#fff";this.ctx.fillRect(0,0,a.w*b,a.h*b)},setDarkMode:function(b){this.isDarkMode=b},render:function(){var b,a=this.opts,c=a.data.ys,d=a.state,e=a.additional.mini,f=e||a.data.master&&1>d.masterVisibility&&0<d.masterVisibility||a.data.slave&&1>d.slaveVisibility&&0<d.slaveVisibility;var g=e?d.xg1:d.x1;var k=e?d.xg2:d.x2;var h=a.settings;var m=h["PADD"+(e?"_MINI":"")][0],x=h["PADD"+(e?"_MINI":"")][1],r=h["PADD"+(e?"_MINI":"")][2],p=h["PADD"+(e?"_MINI":"")][3],n=a.data.x,q=a.settings.dpi,l=f?this.ctx:this.opts.ctx,w=e?d.dims.mini:d.dims.graph,A=d.zoomMode,D=d.detailInd1,B=d.detailInd2,E=void 0==d.zoomMorph?0:d.zoomMorph,G=c.length,I="step"==a.graphStyle;h=(w.w-x-p)/(k-g+(I?this.opts.data.mainPeriodLen*(1-E):0));var z=Math.floor(t.TUtils.getXIndex(n,g-p/h));k=Math.ceil(t.TUtils.getXIndex(n,k+x/h));h*=q;g=(p+(f?0:w.l))*q-g*h;I&&A&&1==E&&(z<this.opts.state.xg1Ind&&(z=this.opts.state.xg1Ind),k>this.opts.state.xg2Ind&&(k=this.opts.state.xg2Ind-1));x=this.opts.data.mainPeriodLen*h;p=this.opts.data.detailPeriodLen*h;if(f){var u=[w.w,w.h,e?d.xg1:d.x1,e?d.xg2:d.x2,this.isDarkMode,A];e||(u.push(d.y1),u.push(d.y2));for(b=0;b<G;b++)u.push(e?d["om_"+b]:d["o_"+b]),u.push(d["f_"+b]);u=u.join(",");if(u==this.cached){this.opts.ctx.drawImage(this.$canvas,w.l*q,w.t*q);return}this.cached=u;l.clearRect(0,0,w.w*q,w.w*q)}b=(a.additional.mini?1:"auto"==a.data.strokeWidth?5<G?1:2:a.data.strokeWidth)*q;u=0==b%2?0:.5;l.lineWidth=b;l.lineCap=a.additional.mini?"square":"round";l.lineJoin=a.additional.mini?"square":"round";for(b=0;b<G;b++){var y=e?d["om_"+b]:d["o_"+b];var F=d["e_"+b];if(0<y){var Q=c[b].y;var T=c[b].yFrom;if(a.pairY){var P=e?d["y1m_"+b]:d["y1_"+b];F=e?d["y2m_"+b]:d["y2_"+b]}else e?F&&1>y?(P=d.y1m_show,F=d.y2m_show):!F&&1>y?(P=d.y1m_hidd,F=d.y2m_hidd):(P=d.y1m,F=d.y2m):(P=d.y1,F=d.y2);F=q*(w.h-m-r)/(F-P);P=(w.h-r+(f?0:w.t))*q+P*F;l.beginPath();l.strokeStyle=this.isDarkMode?c[b].colors_n[0]:c[b].colors_d[0];l.globalAlpha=y*(.9*d["f_"+b]+.1);var N=Number.MAX_VALUE,R=-Number.MAX_VALUE,O=-Number.MAX_VALUE,H=!1,W=!0;for(y=z;y<=k;y++){if(A)if(y>=D&&y<=B){var Z=T[y]+E*(Q[y]-T[y]);var J=p}else Z=Q[y]+E*(Q[D]-Q[y]),J=x;else Z=Q[y],J=x;if(isNaN(Z))W=!0;else{var ka=n[y]*h+g<<0;yc=P-Z*F<<0;ka>O||I&&y==B+1?(H&&(la==N?(l.moveTo(O+u,R-u),l.lineTo(O+u,N-u)):(l.moveTo(O+u,N-u),l.lineTo(O+u,R-u),la!=R&&l.moveTo(O+u,la-u)),H=!1),W&&(l.moveTo(ka+u,yc-u),W=!1),R=N=yc,l.lineTo(ka+u,yc-u),I&&l.lineTo((n[y]*h+J+g<<0)+u,yc-u)):(N=Math.min(N,yc),R=Math.max(R,yc),H=!0);O=ka;var la=yc}}H&&(l.moveTo(O+u,N-u),l.lineTo(O+u,R-u));l.stroke()}}l.globalAlpha=1;f&&this.opts.ctx.drawImage(this.$canvas,w.l*q,w.t*q)}};t.TLines=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;var a,c;this.isTouch=t.TUtils.isTouchDevice();this.enabled=b.data.ys.length;1!=this.enabled||b.data.forceLegend||(b.$parent.style.display="none");this.switchers=b.data.ys.map(function(d,e){var f=document.createElement("div");f.className="tchart--switcher";b.state["e_"+e]?f.classList.toggle("tchart--switcher__active"):this.enabled--;f.setAttribute("data-label",d.label);b.$parent.appendChild(f);var g=document.createElement("span");g.textContent=d.label;f.appendChild(g);this.isTouch||(f.addEventListener("mouseenter",function(x){b.state["e_"+e]&&b.additional.onEnter(e)}),f.addEventListener("mouseleave",function(x){b.state["e_"+e]&&b.additional.onLeave(e)}));f.addEventListener("click",function(x){c?c=!1:(x=f.classList.contains("tchart--switcher__active"))&&1==this.enabled?(f.classList.add("tchart--switcher__denied"),clearTimeout(a),a=setTimeout(function(){f.classList.remove("tchart--switcher__denied")},500)):(this.isTouch||(x?b.additional.onLeave(e):b.additional.onEnter(e)),b.additional.onClick(!x,e))}.bind(this));var k,h,m;this.drag=new t.TDrag({$el:f,noPrevent:!0,useElForMove:!0,onDragStart:function(x){k=x.pageX;h=x.pageY;m=setTimeout(function(){c=!0;if(!this.isTouch)b.additional.onEnter(e);b.additional.onLongTap(e)}.bind(this),500)}.bind(this),onDragMove:function(x){(5<Math.abs(k-x.pageX)||5<Math.abs(h-x.pageY))&&clearTimeout(m)}.bind(this),onDragEnd:function(x){clearTimeout(m)}.bind(this)});return f}.bind(this));this.updateColors()};C.prototype={onResize:function(){},updateColors:function(){for(var b=this.opts.data.ys,a=0;a<this.switchers.length;a++)this.switchers[a].style.color=this.isDarkMode?b[a].colors_n[1]:b[a].colors_d[1]},setDarkMode:function(b){this.isDarkMode=b;this.updateColors()},render:function(b){for(var a=this.enabled=0;a<this.switchers.length;a++)b[a]?(this.enabled++,this.switchers[a].classList.add("tchart--switcher__active")):this.switchers[a].classList.remove("tchart--switcher__active")}};t.TSwitchers=C})();(function(){var t=window.Graph.units,C=function(b){this.opts=b;this.shown=!1;this.isTouch=t.TUtils.isTouchDevice();this.$canvas=b.$canvas;this.cache={};this.$tip=document.createElement("div");this.$tip.className="tchart--tip";b.$parent.appendChild(this.$tip);this.$tipDt=document.createElement("h6");this.$tip.appendChild(this.$tipDt);this.$tipDtText=document.createTextNode("");this.$tipDt.appendChild(this.$tipDtText);this.$tipDtText.nodeValue=".";this.$tipArrow=document.createElement("div");this.$tipArrow.className="tchart--tip-arrow";this.$tip.appendChild(this.$tipArrow);this.$tipLoader=document.createElement("div");this.$tipLoader.className="tchart--tip-loader";this.$tip.appendChild(this.$tipLoader);this.$tipScrollerWrapper=document.createElement("div");this.$tipScrollerWrapper.className="tchart--tip-scroller-wrapper";this.$tip.appendChild(this.$tipScrollerWrapper);this.$tipScroller=document.createElement("div");this.$tipScroller.className="tchart--tip-scroller";this.$tipScrollerWrapper.appendChild(this.$tipScroller);this.updateTipScrollClasses=this.updateTipScrollClasses.bind(this);this.$tipScroller.addEventListener("scroll",this.updateTipScrollClasses);this.labels=[];b.data.ys.forEach(function(a,c){this.labels.push(this.addLabel(a))}.bind(this));"bar"==b.graphStyle&&1<b.data.ys.length&&(this.allLabel=this.addLabel({label:"All",outside:!0}));"area"==b.graphStyle&&(this.pieLabel=this.addLabel({label:"pie",outside:!0}));this.tooltipOnHover=this.isTouch?!1:b.data.tooltipOnHover;"bar"!=b.graphStyle?(this.$line=document.createElement("div"),this.$line.className="tchart--line",b.$parent.appendChild(this.$line),this.$lineFill=document.createElement("div"),this.$line.appendChild(this.$lineFill),"area"!=b.graphStyle&&(this.points=b.data.ys.map(function(a,c){a=document.createElement("span");this.$line.appendChild(a);return a}.bind(this)))):(b.state.barInd=-1,b.state.barO=0);this.onMouseMove=this.onMouseMove.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.onBodyClick=this.onBodyClick.bind(this);this.onTipClick=this.onTipClick.bind(this);this.tooltipOnHover?(this.$canvas.addEventListener("mousemove",function(a){this.canvasPos=this.canvasPos||t.TUtils.getElemPagePos(this.$canvas);this.dx=a.pageX-this.canvasPos.x;this.dy=a.pageY-this.canvasPos.y;(this.tp=this.getTp(this.dx,this.dy-this.opts.state.dims.tip.t,this.isTouch))?this.shown?this.render({isMove:!0}):(delete this.prevXInd,this.toggle(!0),this.render({})):this.toggle(!1)}.bind(this)),this.$canvas.addEventListener("mouseleave",function(){delete this.canvasPos;this.toggle(!1)}.bind(this)),this.$canvas.addEventListener("click",function(a){if(this.shown)this.onTipClick(a)}.bind(this)),this.$tip.style.pointerEvents="none"):(this.drag=new t.TDrag({$el:this.$canvas,onDragStart:function(a){this.canvasPos=t.TUtils.getElemPagePos(this.$canvas);this.dx=a.pageX-this.canvasPos.x;this.dy=a.pageY-this.canvasPos.y;this.tp=this.getTp(this.dx,this.dy-this.opts.state.dims.tip.t,a.isTouch);delete this.prevXInd;clearTimeout(this.showTimeout);this.showTimeout=setTimeout(function(){this.toggle(!!this.tp);this.tp&&this.render()}.bind(this),this.isTouch?100:30);document.body.removeEventListener("click",this.onBodyClick);return!this.tp}.bind(this),onDragMove:function(a){a.canceled?(clearTimeout(this.showTimeout),this.toggle(!1)):(this.canvasPos=this.canvasPos||t.TUtils.getElemPagePos(this.$canvas),this.dx=a.pageX-this.canvasPos.x,this.dy=a.pageY-this.canvasPos.y,this.render({isMove:!0}))}.bind(this),onDragEnd:function(a){delete this.canvasPos;this.bodyTimeout=setTimeout(function(){document.body.addEventListener("click",this.onBodyClick)}.bind(this),140)}.bind(this)}),this.$tip.addEventListener("click",this.onTipClick));this.trackMouse(!0);this.updateColors()};C.prototype={onResize:function(b){b=this.opts.state.dims.tip;if(this.$line){var a="area"==this.opts.graphStyle?25:16;this.$line.style.top=b.t+"px";this.$line.style.height=b.h+"px";this.$lineFill.style.top=a+"px";this.$lineFill.style.bottom=this.opts.settings.PADD[2]+1+"px"}this.render()},abortDetailCallbacks:function(){this.detailCallbacks&&(this.detailCallbacks.forEach(function(b,a){b.cancelled=!0}),delete this.detailCallbacks)},onTipClick:function(b){if(void 0!=this.prevXInd&&this.opts.additional.onClick&&this.opts.data.hasDetail&&!this.opts.state.zoomMode&&!this.opts.state.zoomModeSpecial&&(b.stopPropagation(),!this.$tip.classList.contains("tchart--tip__loading"))){var a=this.opts.data.x[this.prevXInd];if(this.opts.data.detailsFunc)if(this.$tip.classList.remove("tchart--tip__error"),this.$tip.classList.add("tchart--tip__loading"),this.cache[a])this.toggle(!1,!0),this.opts.additional.onClick(!0,a,this.cache[a]),this.$tip.classList.remove("tchart--tip__loading");else{this.abortDetailCallbacks();b=this.opts.data.detailsFunc(a);var c=this;this.detailCallbacks=this.detailCallbacks||[];var d=function(f){d.cancelled||(c.$tip.classList.remove("tchart--tip__loading"),f&&f.columns?(c.toggle(!1,!0),c.opts.additional.onClick(!0,a,f),c.cache[a]=f):c.$tip.classList.add("tchart--tip__error"))},e=function(f){e.cancelled||(console.log("error:",f),c.$tip.classList.remove("tchart--tip__loading"),c.$tip.classList.add("tchart--tip__error"))};this.detailCallbacks.push(d);this.detailCallbacks.push(e);b.then(d).catch(e)}else this.toggle(!1,!0),this.opts.additional.onClick(!0,a)}},updateColors:function(){var b=this.opts.data.ys;this.labels.forEach(function(a,c){this.points&&(this.points[c].style.borderColor=this.isDarkMode?b[c].colors_n[0]:b[c].colors_d[0]);a.$value.style.color=this.isDarkMode?b[c].colors_n[2]:b[c].colors_d[2]}.bind(this));this.allLabel&&(this.allLabel.$value.style.color=this.isDarkMode?"#fff":"#000");this.$lineFill&&(this.$lineFill.style.backgroundColor=this.isDarkMode?"rgba(255, 255, 255, 0.1)":"rgba(24, 45, 59, 0.1)")},setDarkMode:function(b){this.isDarkMode=b;this.updateColors()},addLabel:function(b){var a=document.createElement("div");a.className="tchart--tip-row";b.outside?(this.$tip.appendChild(a),a.classList.add("tchart--tip-row__outside")):this.$tipScroller.appendChild(a);var c=document.createElement("span");a.appendChild(c);var d=document.createTextNode("");d.nodeValue=b.label;c.appendChild(d);if("area"==this.opts.graphStyle){var e=document.createElement("p");a.appendChild(e);var f=document.createTextNode("");e.appendChild(f)}b=document.createElement("div");a.appendChild(b);var g=document.createTextNode("");b.appendChild(g);return{$row:a,$value:b,$valueText:g,$label:c,$labelText:d,$per:e,$perText:f}},getTp:function(b,a,c){if("area"==this.opts.graphStyle&&this.opts.state.zoomMode){var d=this.opts.state.dims.graph;c=d.w/2;d=d.h/2;return Math.pow((d-a)*(d-a)+(b-c)*(b-c),.5)<=this.opts.settings.PIE_RADIUS?"graph":""}d=this.opts.state.dims.tip;return 0>a||a>d.h?"":"graph"},trackMouse:function(b,a){this.isTouch||(this.$canvas.addEventListener("mousemove",this.onMouseMove),this.$canvas.addEventListener("mouseleave",this.onMouseLeave))},onMouseLeave:function(){this.$canvas.classList.remove("tchart--graph-canvas__tip-pointer");delete this.canvasPos},onMouseMove:function(b){this.canvasPos=this.canvasPos||t.TUtils.getElemPagePos(this.$canvas);b=this.getTp(b.pageX-this.canvasPos.x,b.pageY-this.canvasPos.y-this.opts.state.dims.tip.t,!1);this.onMouseLeave();b&&this.$canvas.classList.add("tchart--graph-canvas__tip-pointer")},toggle:function(b,a){var c=this.opts,d=c.state;b&&!this.shown&&(this.$tip.classList.add("tchart--tip__visible"),!this.opts.data.hasDetail||this.opts.state.zoomMode||this.opts.state.zoomModeSpecial?this.$tip.classList.remove("tchart--tip__has-zoom"):this.$tip.classList.add("tchart--tip__has-zoom"),this.$tip.classList.remove("tchart--tip__shiftHide"),this.$line&&this.$line.classList.add("tchart--line__visible"),t.TUtils.triggerEvent("chart-hide-tips",{except:this.opts.chart}));if(!b&&this.shown){delete this.lastCurPieItemInd;if("area"==c.graphStyle&&d.zoomMode){for(var e=[],f=0;f<d.pieAngles.length;f++)e.push({prop:"pieInd_"+d.pieAngles[f].ind,state:c.state,end:0,duration:350,tween:"exp",speed:.2,group:{top:!0}});c.animator.add(e)}a&&(this.$tip.classList.add("tchart--tip__shiftHide"),this.lastTipTop-=12,this.lastTipLeft=this.lastTipLeft<this.opts.state.dims.tip.w/2?this.lastTipLeft-12:this.lastTipLeft+12,this.$tip.style.transform="translate("+this.lastTipLeft+"px,"+this.lastTipTop+"px)",this.$tip.style.webkitTransform="translate("+this.lastTipLeft+"px,"+this.lastTipTop+"px)");this.$tip.classList.remove("tchart--tip__visible");this.$line&&this.$line.classList.remove("tchart--line__visible");this.abortDetailCallbacks();this.$tip.classList.remove("tchart--tip__error");this.$tip.classList.remove("tchart--tip__loading");"bar"==this.opts.graphStyle&&this.opts.animator.add([{prop:"barInd",state:this.opts.state,end:-1,duration:0,delay:150,tween:"linear",group:{top:!0}},{prop:"barO",state:this.opts.state,end:0,duration:150,tween:"exp",speed:.3,group:{top:!0}}]);document.body.removeEventListener("click",this.onBodyClick)}this.shown=b},onBodyClick:function(b){b.target!=this.$canvas&&this.toggle(!1)},renderPieTooltip:function(b){var a=this.opts,c=a.state,d=this.opts.settings;b=d.PADD[0];var e=d.PADD[1],f=d.PADD[2];d=d.PADD[3];var g=c.dims.graph,k=c.dims.tip,h=g.w/2,m=g.h/2,x=t.TUtils.getFormatter("yTooltipFormatter",a.data,c.zoomMorph);m=Math.atan2(m-this.dy+g.t,this.dx-h);m=0>m?2*Math.PI+m:m;var r;for(g=0;g<c.pieAngles.length;g++)h=c.pieAngles[g],m<=h.st&&m>=h.ed&&(r=h),m-2*Math.PI<=h.st&&m-2*Math.PI>=h.ed&&(r=h);if(this.lastCurPieItemInd!=r.ind){m=[];for(g=0;g<c.pieAngles.length;g++)h=c.pieAngles[g],m.push({prop:"pieInd_"+h.ind,state:a.state,end:h==r?1:0,duration:350,tween:"exp",speed:.2,group:{top:!0}});a.animator.add(m)}this.pieLabel.$row.style.display="block";this.labels.forEach(function(p,n){p.$row.style.display="none"}.bind(this));this.pieLabel.$labelText.nodeValue=r.label;this.pieLabel.$valueText.nodeValue=isNaN(r.value)?"n/a":x(r.value);this.pieLabel.$value.style.color=r.color;this.$tip.classList.add("tchart--tip__piemode");this.$line&&this.$line.classList.add("tchart--line__piemode");this.tipH=this.$tip.offsetHeight;this.tipW=this.$tip.offsetWidth;a=this.dx-this.tipW/2;f=Math.min(this.dy-20-this.tipH,k.t+k.h-this.tipH-f);f<k.t+b&&(f=k.t+b);a=Math.min(Math.max(a,d/2),k.w-this.tipW-e/2);this.$tip.style.transform="translate("+(a<<0)+"px,"+(f<<0)+"px)";this.$tip.style.webkitTransform="translate("+(a<<0)+"px,"+(f<<0)+"px)";this.lastCurPieItemInd=r.ind;this.updateTipScrollClasses()},render:function(b){if(this.shown){var a=this.opts,c=a.state,d=this.opts.settings,e=d.PADD[0],f=d.PADD[1],g=d.PADD[2];d=d.PADD[3];var k,h,m,x=0,r=this.opts.state.dims.tip,p=t.TUtils.getFormatter("yTooltipFormatter",a.data,c.zoomMorph),n=("bar"==a.graphStyle||"step"==a.graphStyle?this.opts.data.mainPeriodLen:0)*(1-(void 0==c.zoomMorph?0:c.zoomMorph));b=b||{};this.abortDetailCallbacks();this.$tip.classList.remove("tchart--tip__error");this.$tip.classList.remove("tchart--tip__loading");if("area"==a.graphStyle&&c.zoomMode)this.renderPieTooltip(b);else{this.pieLabel&&(this.pieLabel.$row.style.display="none");var q=t.TUtils.getXIndex(a.data.x,c.x1+(Math.max(Math.min(this.dx,r.w-1),0)-d)/(r.w-f-d)*(c.x2-c.x1+n)),l="bar"==a.graphStyle||"step"==a.graphStyle?Math.floor(q):Math.round(q);if("bar"!==a.graphStyle&&"step"!==a.graphStyle)q=(a.data.x[l]-c.x1)/(c.x2-c.x1+n),q=q*(r.w-d-f)+d<<0,0>q&&l++,q>r.w-1&&l--;else if(this.opts.state.zoomMode||this.opts.state.zoomModeSpecial)l<a.state.detailInd1&&l++,l>a.state.detailInd2&&l--;"bar"==a.graphStyle&&a.animator.add([{prop:"barInd",state:a.state,end:l,duration:0,tween:"linear",group:{top:!0}},{prop:"barO",state:this.opts.state,end:1,duration:150,tween:"exp",speed:.3,group:{top:!0}}]);if(this.prevXInd!=l||!b.isMove){this.$tip.classList.remove("tchart--tip__piemode");this.$line&&this.$line.classList.remove("tchart--line__piemode");this.labels.forEach(function(B,E){var G=a.state["e_"+E]&&!isNaN(a.data.ys[E].y[l])?"block":"none";B.$row.style.display=G;this.points&&(this.points[E].style.display=G);x+="block"==G?1:0}.bind(this));this.itemsVisible=x;this.allLabel&&(this.allLabel.$row.style.display=1<x?"block":"none");this.itemsVisible?(this.$tip.classList.remove("tchart--tip__has_no_items"),this.$line&&this.$line.classList.remove("tchart--line__has_no_items")):(this.$tip.classList.add("tchart--tip__has_no_items"),this.$line&&this.$line.classList.add("tchart--line__has_no_items"));q=0;"step"==a.graphStyle&&(q=this.opts.state.zoomMode?a.data.detailPeriodLen:a.data.mainPeriodLen);q=(a.data.x[l]-c.x1+q/2)/(c.x2-c.x1+n);q=q*(r.w-d-f)+d<<0;this.$line&&(this.$line.style.transform="translateX("+q+"px)");this.$line&&(this.$line.style.webkitTransform="translateX("+q+"px)");this.$tipDtText.nodeValue=a.data.dates[l];var w=0;a.data.ys.forEach(function(B,E){a.state["e_"+E]&&!isNaN(B.y[l])&&(this.labels[E].$valueText.nodeValue=(B.ctf||p)(B.y[l]),w+=B.y[l]||0,this.points&&(k=this.points[E],a.pairY?(h=c["y1_"+E],m=c["y2_"+E]):(h=c.y1,m=c.y2),B=(B.y[l]-h)/(m-h),k.style.transform="translateY("+(r.h-B*(r.h-e-g)-g<<0)+"px)",k.style.webkitTransform="translateY("+(r.h-B*(r.h-e-g)-g<<0)+"px)"))}.bind(this));this.allLabel&&(this.allLabel.$valueText.nodeValue=p(w));b.isMove||(this.maxDateWidth=this.maxPercentageWidth=this.maxValueWidth=this.maxLabelWidth=0,b=window.getComputedStyle(this.$tip),this.rowPaddings=parseInt(b.getPropertyValue("padding-left"),10)+parseInt(b.getPropertyValue("padding-right"),10));"area"==a.graphStyle&&this.fillPercentages(l,w);this.labels.forEach(function(B,E){a.state["e_"+E]&&!isNaN(a.data.ys[E].y[l])&&(E=B.$label.offsetWidth,E>this.maxLabelWidth&&(this.maxLabelWidth=E),B=B.$value.offsetWidth,B>this.maxValueWidth&&(this.maxValueWidth=B))}.bind(this));b=this.rowPaddings+this.maxLabelWidth+20+this.maxValueWidth;b+="area"==a.graphStyle?this.maxPercentageWidth:0;n=this.rowPaddings+this.$tipDt.offsetWidth+20;n>this.maxDateWidth&&(this.maxDateWidth=n);b=Math.max(b,this.maxDateWidth);this.$tip.style.width=b+"px";this.tipH=this.$tip.offsetHeight;this.tipW=this.$tip.offsetWidth}b=2>=this.itemsVisible?"center":"side";if("center"==b){var A=this.dx-this.tipW/2,D=Math.min(this.dy-20-this.tipH,r.t+r.h-this.tipH-g);D<r.t+e&&(b="side")}"side"==b&&(A=this.dx>r.w/2?this.dx-this.tipW-20:this.dx+20,D=Math.min(Math.max(this.dy-this.tipH/2,r.t+e),r.t+r.h-this.tipH-g));A=Math.min(Math.max(A,d/2),r.w-this.tipW-f/2);this.$tip.style.transform="translate("+(A<<0)+"px,"+(D<<0)+"px)";this.$tip.style.webkitTransform="translate("+(A<<0)+"px,"+(D<<0)+"px)";this.lastTipLeft=A<<0;this.lastTipTop=D<<0;this.prevXInd=l;this.updateTipScrollClasses()}}},updateTipScrollClasses:function(){this.$tipScroller.scrollHeight>this.$tipScroller.offsetHeight?this.$tip.classList.add("tchart--tip__scroll"):this.$tip.classList.remove("tchart--tip__scroll");0>=this.$tipScroller.scrollTop?this.$tip.classList.remove("tchart--tip__has_less"):this.$tip.classList.add("tchart--tip__has_less");this.$tipScroller.scrollTop>=this.$tipScroller.scrollHeight-this.$tipScroller.offsetHeight?this.$tip.classList.remove("tchart--tip__has_more"):this.$tip.classList.add("tchart--tip__has_more")},fillPercentages:function(b,a){var c=this.opts,d=[],e=2;c.data.ys.forEach(function(f,g){if(c.state["e_"+g]){d[g]=Math.max(Math.round(100*f.y[b]/a),0);if(isNaN(f.y[b])||0==a)d[g]=0;100==d[g]&&(e=3)}}.bind(this));c.data.ys.forEach(function(f,g){c.state["e_"+g]&&(f=8*e+17,this.labels[g].$label.style.transform="translateX("+f+"px)",this.labels[g].$label.style.webkitTransform="translateX("+f+"px)",this.labels[g].$perText.nodeValue=d[g]+"%",this.labels[g].$per.style.width=f-7+"px",f>this.maxPercentageWidth&&(this.maxPercentageWidth=f))}.bind(this))}};t.TTip=C})();(function(){Math.log2=Math.log2||function(c){return Math.log(c)*Math.LOG2E};Math.log10=Math.log10||function(c){return Math.log(c)*Math.LOG10E};var t="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),C="Sun Mon Tue Wed Thu Fri Sat".split(" "),b="January February March April May June July August September October November December".split(" "),a={simplifyData:function(c,d,e,f,g,k,h,m,x){c=(m-h)/x;x=[];var r=[];if(1>=c)return{xInd1:h,xInd2:m,x:d,ys:e};for(var p=0,n=-999999999,q=k.length,l;h<=m;h++){var w=d[h]*f+g<<0;(n=w>n)?(x[p]=d[h],p++):l++;for(j=0;j<q;j++){var A=k[j];r[A]=r[A]||{y:[]};var D=e[A].y[h];r[A].y[p-1]=void 0==r[A].y[p-1]?D:r[A].y[p-1]+D;1<p&&(n&&(r[A].y[p-2]/=l),h==m&&(r[A].y[p-1]/=l))}n&&(l=1);n=w}return{isOptimized:1<c,xInd1:0,xInd2:p-1,x,ys:r}},getElemPagePos:function(c){c=c.getBoundingClientRect();return{x:c.left+(window.pageXOffset||document.documentElement.scrollLeft),y:c.top+(window.pageYOffset||document.documentElement.scrollTop)}},getXIndex:function(c,d,e){var f=0,g=c.length-1;for(e||(d<c[f]?d=c[f]:d>c[g]&&(d=c[g]));1<Math.abs(f-g);)e=Math.round((f+g)/2),d>=c[f]&&d<=c[e]?g=e:f=e;return f+(d-c[f])/(c[g]-c[f])},triggerEvent:function(c,d){"function"==typeof window.CustomEvent&&document.dispatchEvent(new CustomEvent(c,{detail:d||null}))},isTouchDevice:function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var c=["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz)"].join("");return window.matchMedia(c).matches},drawRoundedRect:function(c,d,e,f,g,k,h){e*=d;f*=d;g*=d;k*=d;"number"==typeof h&&(h=[h,h,h,h]);h[0]*=d;h[1]*=d;h[2]*=d;h[3]*=d;c.beginPath();c.moveTo(g+h[0],k);c.lineTo(g+e-h[1],k);c.quadraticCurveTo(g+e,k,g+e,k+h[1]);c.lineTo(g+e,k+f-h[2]);c.quadraticCurveTo(g+e,k+f,g+e-h[2],k+f);c.lineTo(g+h[3],k+f);c.quadraticCurveTo(g,k+f,g,k+f-h[3]);c.lineTo(g,k+h[0]);c.quadraticCurveTo(g,k,g+h[0],k);c.closePath()},drawRoundedRect2:function(c,d,e,f,g,k,h){e*=d;f*=d;g*=d;k*=d;h*=d;e<2*h&&(h=e/2);f<2*h&&(h=f/2);c.beginPath();c.moveTo(g+h,k);c.arcTo(g+e,k,g+e,k+f,h);c.arcTo(g+e,k+f,g,k+f,h);c.arcTo(g,k+f,g,k,h);c.arcTo(g,k,g+e,k,h);c.closePath()},getFormatter:function(c,d,e){var f;.5<e&&d.details&&(f=d.details[c]);return f||d[c]||a[c]},xTooltipFormatter:function(c,d){c=new Date(c);c=[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCDay(),c.getUTCHours(),c.getUTCMinutes()];return d?(10>c[4]?"0":"")+c[4]+":"+(10>c[5]?"0":"")+c[5]:C[c[3]]+", "+c[2]+" "+t[c[1]]+" "+c[0]},xTickFormatter:function(c,d){c=new Date(c);c=[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCDay(),c.getUTCHours(),c.getUTCMinutes()];return d?(10>c[4]?"0":"")+c[4]+":"+(10>c[5]?"0":"")+c[5]:c[2]+" "+t[c[1]]},xRangeFormatter:function(c,d){c=new Date(c);c=[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()];return c[2]+" "+b[c[1]]+" "+c[0]},yTickFormatter:function(c,d,e){return 0==c?0:1E3>d?Math.floor(c):1E3<=d&&1E6>d?e?Math.floor(10*c/1E3)/10+"K":Math.round(c/1E3)+"K":e?Math.floor(10*c/1E6)/10+"M":Math.round(c/1E6)+"M"},yTooltipFormatter:function(c){return"number"!==typeof c?"string"===typeof c?c:"?":a.statsFormatKMBT(c)},statsFormatKMBT:function(c,d,e){if(0==c)return"0";null==d&&(d=a.statsChooseNumKMBT(c));c=a.statsFormatFixedKMBT(c,d);null==e&&(e=a.statsChoosePrecision(c));return c.toFixed(e)+d},statsFormatFixedKMBT:function(c,d){switch(d){case "K":return c/1E3;case "M":return c/1E6;case "B":return c/1E9;case "T":return c/1E12}return c},statsChoosePrecision:function(c){c=Math.abs(c);return 10<c?0:1<=c?.001>Math.abs(c-Math.floor(c))?0:1:2},statsChooseNumKMBT:function(c){c=Math.abs(c);return 1E12<=c?"T":1E9<=c?"B":1E6<=c?"M":2E3<=c?"K":""},roundRange:function(c,d,e,f){1>Math.abs(d-c)&&(c-=c/10,d+=d/10);if(f)return{yMin:c-(f.yMinOrig-f.yMin)/(f.yMaxOrig-f.yMinOrig)*(d-c),yMax:d+(f.yMax-f.yMaxOrig)/(f.yMaxOrig-f.yMinOrig)*(d-c),yMinOrig:c,yMaxOrig:d};f=function(p){var n=h*p;p=Math.floor(c/n)*n;n=p+e*Math.ceil((d-p)*g/n)*n;return{good:n<=x&&p>=m,yMin:Math.round(p),yMax:Math.round(n),yMinOrig:c,yMaxOrig:d}};for(var g=1/e,k=(d-c)*g,h=Math.max(Math.pow(10,Math.floor(Math.log10(k))),1),m=c-.5*k,x=d+.5*k,r=1;;){k=f(5);if(k.good)break;k=f(2);if(k.good)break;k=f(1);if(k.good)break;h*=.1;r++;if(10<r)return{yMinOrig:c,yMaxOrig:d,yMin:c,yMax:d}}return k}};window.Graph.units.TUtils=a})();